var e=Object.defineProperty,t=Object.getOwnPropertyNames,n=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{r,a as i,g as s,c as o,R as a}from"./vendor-D4I5kSlY.js";var c,l,u=(c={"assets/main-kKAWC5B6.js"(e,t){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var c={exports:{}},l={},u=r,d=Symbol.for("react.element"),h=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,f=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function v(e,t,n){var r,i={},s=null,o=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(o=t.ref),t)p.call(t,r)&&!m.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:d,type:e,key:s,ref:o,props:i,_owner:f.current}}l.Fragment=h,l.jsx=v,l.jsxs=v,c.exports=l;var g,y=c.exports,_=i;g=_.createRoot,_.hydrateRoot;const b="https://wintermute-staging-x-49dd432d3500.herokuapp.com",E=(b.endsWith("/")?b:b+"/")+"api/v1/",w=(e,t,n)=>{const r=crypto.randomUUID();return{matches:[],similarity_scores:[],error:{code:e,message:t,trace_id:r,timestamp:(new Date).toISOString(),details:n},trace_id:r}};var S={};const k=globalThis||self;function T(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C,M,A={exports:{}},O=A.exports={};function D(){throw new Error("setTimeout has not been defined")}function P(){throw new Error("clearTimeout has not been defined")}function L(e){if(C===setTimeout)return setTimeout(e,0);if((C===D||!C)&&setTimeout)return C=setTimeout,setTimeout(e,0);try{return C(e,0)}catch(an){try{return C.call(null,e,0)}catch(t){return C.call(this,e,0)}}}!function(){try{C="function"==typeof setTimeout?setTimeout:D}catch(an){C=D}try{M="function"==typeof clearTimeout?clearTimeout:P}catch(an){M=P}}();var I,N=[],j=!1,x=-1;function R(){j&&I&&(j=!1,I.length?N=I.concat(N):x=-1,N.length&&F())}function F(){if(!j){var e=L(R);j=!0;for(var t=N.length;t;){for(I=N,N=[];++x<t;)I&&I[x].run();x=-1,t=N.length}I=null,j=!1,function(e){if(M===clearTimeout)return clearTimeout(e);if((M===P||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(e);try{return M(e)}catch(an){try{return M.call(null,e)}catch(t){return M.call(this,e)}}}(e)}}function U(e,t){this.fun=e,this.array=t}function B(){}O.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];N.push(new U(e,t)),1!==N.length||j||L(F)},U.prototype.run=function(){this.fun.apply(null,this.array)},O.title="browser",O.browser=!0,O.env={},O.argv=[],O.version="",O.versions={},O.on=B,O.addListener=B,O.once=B,O.off=B,O.removeListener=B,O.removeAllListeners=B,O.emit=B,O.prependListener=B,O.prependOnceListener=B,O.listeners=function(e){return[]},O.binding=function(e){throw new Error("process.binding is not supported")},O.cwd=function(){return"/"},O.chdir=function(e){throw new Error("process.chdir is not supported")},O.umask=function(){return 0};const q=T(A.exports);function V(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){var t=function(e,t){if("object"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===G(t)?t:String(t)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function W(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}function K(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,n){return(t=$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,i)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){ee(s,r,i,o,a,"next",e)}function a(e){ee(s,r,i,o,a,"throw",e)}o(void 0)}))}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ie,se={},oe={get exports(){return se},set exports(e){se=e}},ae="object"==typeof Reflect?Reflect:null,ce=ae&&"function"==typeof ae.apply?ae.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};ie=ae&&"function"==typeof ae.ownKeys?ae.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var le=Number.isNaN||function(e){return e!=e};function ue(){ue.init.call(this)}oe.exports=ue,se.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var o,a;be(e,t,s,{once:!0}),"error"!==t&&(a=i,"function"==typeof(o=e).on&&be(o,"error",a,{once:!0}))}))},ue.EventEmitter=ue,ue.prototype._events=void 0,ue.prototype._eventsCount=0,ue.prototype._maxListeners=void 0;var de=10;function he(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function pe(e){return void 0===e._maxListeners?ue.defaultMaxListeners:e._maxListeners}function fe(e,t,n,r){var i,s,o;if(he(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=pe(e))>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,console&&console.warn}return e}function me(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ve(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=me.bind(r);return i.listener=n,r.wrapFn=i,i}function ge(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):_e(i,i.length)}function ye(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function _e(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function be(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(ue,"defaultMaxListeners",{enumerable:!0,get:function(){return de},set:function(e){if("number"!=typeof e||e<0||le(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");de=e}}),ue.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ue.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||le(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ue.prototype.getMaxListeners=function(){return pe(this)},ue.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)ce(a,this,t);else{var c=a.length,l=_e(a,c);for(n=0;n<c;++n)ce(l[n],this,t)}return!0},ue.prototype.addListener=function(e,t){return fe(this,e,t,!1)},ue.prototype.on=ue.prototype.addListener,ue.prototype.prependListener=function(e,t){return fe(this,e,t,!0)},ue.prototype.once=function(e,t){return he(t),this.on(e,ve(this,e,t)),this},ue.prototype.prependOnceListener=function(e,t){return he(t),this.prependListener(e,ve(this,e,t)),this},ue.prototype.removeListener=function(e,t){var n,r,i,s,o;if(he(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},ue.prototype.off=ue.prototype.removeListener,ue.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},ue.prototype.listeners=function(e){return ge(this,e,!0)},ue.prototype.rawListeners=function(e){return ge(this,e,!1)},ue.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ye.call(e,t)},ue.prototype.listenerCount=ye,ue.prototype.eventNames=function(){return this._eventsCount>0?ie(this._events):[]};var Ee=Object.prototype.hasOwnProperty;function we(e,t,n){for(n of e.keys())if(Se(n,t))return n}function Se(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Se(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"==typeof i&&!(i=we(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"==typeof i&&!(i=we(t,i)))return!1;if(!Se(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"==typeof e){for(n in r=0,e){if(Ee.call(e,n)&&++r&&!Ee.call(t,n))return!1;if(!(n in t)||!Se(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}const ke={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Te={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Ce={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Me={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ae={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Oe{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const r=Oe.getVersionPrecision(e),i=Oe.getVersionPrecision(t);let s=Math.max(r,i),o=0;const a=Oe.map([e,t],(e=>{const t=s-Oe.getVersionPrecision(e),n=e+new Array(t+1).join(".0");return Oe.map(n.split("."),(e=>new Array(20-e.length).join("0")+e)).reverse()}));for(n&&(o=s-Math.min(r,i)),s-=1;s>=o;){if(a[0][s]>a[1][s])return 1;if(a[0][s]===a[1][s]){if(s===o)return 0;s-=1}else if(a[0][s]<a[1][s])return-1}}static map(e,t){const n=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){const r=e[n];if(t(r,n))return r}}static assign(e,...t){const n=e;let r,i;if(Object.assign)return Object.assign(e,...t);for(r=0,i=t.length;r<i;r+=1){const e=t[r];"object"==typeof e&&null!==e&&Object.keys(e).forEach((t=>{n[t]=e[t]}))}return e}static getBrowserAlias(e){return ke[e]}static getBrowserTypeByAlias(e){return Te[e]||""}}const De=/version\/(\d+(\.?_?\d+)+)/i,Pe=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=Oe.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=Oe.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=Oe.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=Oe.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=Oe.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=Oe.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=Oe.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=Oe.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=Oe.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=Oe.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=Oe.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=Oe.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=Oe.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=Oe.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=Oe.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=Oe.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=Oe.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=Oe.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=Oe.getFirstMatch(De,e)||Oe.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=Oe.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=Oe.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=Oe.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=Oe.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=Oe.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=Oe.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=Oe.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=Oe.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=Oe.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=Oe.getFirstMatch(De,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:Oe.getFirstMatch(t,e),version:Oe.getSecondMatch(t,e)}}}];var Le=[{test:[/Roku\/DVP/],describe(e){const t=Oe.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:Me.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=Oe.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:Me.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=Oe.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=Oe.getWindowsVersionName(t);return{name:Me.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:Me.iOS},n=Oe.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=Oe.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=Oe.getMacOSVersionName(t),r={name:Me.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=Oe.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:Me.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=Oe.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=Oe.getAndroidVersionName(t),r={name:Me.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=Oe.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:Me.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=Oe.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Oe.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Oe.getFirstMatch(/\bbb(\d+)/i,e);return{name:Me.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=Oe.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:Me.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=Oe.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:Me.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:Me.Linux})},{test:[/CrOS/],describe:()=>({name:Me.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=Oe.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:Me.PlayStation4,version:t}}}],Ie=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=Oe.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:Ce.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Ce.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Ce.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Ce.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Ce.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Ce.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Ce.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=Oe.getFirstMatch(/(ipod|iphone)/i,e);return{type:Ce.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Ce.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Ce.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:Ce.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:Ce.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:Ce.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:Ce.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:Ce.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:Ce.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:Ce.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:Ce.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:Ce.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:Ce.tv})}],Ne=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:Ae.Blink};const t=Oe.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Ae.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:Ae.Trident},n=Oe.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:Ae.Presto},n=Oe.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:Ae.Gecko},n=Oe.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Ae.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:Ae.WebKit},n=Oe.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class je{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Oe.find(Pe,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=Oe.find(Le,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=Oe.find(Ie,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Oe.find(Ne,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Oe.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const r={};let i=0;if(Object.keys(e).forEach((s=>{const o=e[s];"string"==typeof o?(r[s]=o,i+=1):"object"==typeof o&&(t[s]=o,n+=1)})),n>0){const e=Object.keys(t),n=Oe.find(e,(e=>this.isOS(e)));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}const r=Oe.find(e,(e=>this.isPlatform(e)));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}}if(i>0){const e=Object.keys(r),t=Oe.find(e,(e=>this.isBrowser(e,!0)));if(void 0!==t)return this.compareVersion(r[t])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const i=Oe.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n}compareVersion(e){let t=[0],n=e,r=!1;const i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(Oe.compareVersions(i,n,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((e=>this.is(e)))}}
/*!
     * Bowser - a browser detector
     * https://github.com/lancedikson/bowser
     * MIT License | (c) Dustin Diaz 2012-2015
     * MIT License | (c) Denis Demchenko 2015-2019
     */class xe{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new je(e,t)}static parse(e){return new je(e).getResult()}static get BROWSER_MAP(){return Te}static get ENGINE_MAP(){return Ae}static get OS_MAP(){return Me}static get PLATFORMS_MAP(){return Ce}}function Re(){return Date.now()+Math.random().toString()}function Fe(){throw new Error("Method must be implemented in subclass")}function Ue(e,t){return null!=t&&t.proxyUrl?t.proxyUrl+("/"===t.proxyUrl.slice(-1)?"":"/")+e.substring(8):e}function Be(e){return null!=e&&e.callObjectBundleUrlOverride?e.callObjectBundleUrlOverride:Ue("https://c.daily.co/call-machine/versioned/".concat("0.72.2","/static/call-machine-object-bundle.js"),e)}function qe(e){try{new URL(e)}catch(t){return!1}return!0}const Ve=Object.prototype.toString;function Ye(e){switch(Ve.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Xe(e,Error)}}function Ge(e,t){return Ve.call(e)===`[object ${t}]`}function $e(e){return Ge(e,"ErrorEvent")}function Je(e){return Ge(e,"DOMError")}function We(e){return Ge(e,"String")}function ze(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function He(e){return Ge(e,"Object")}function Qe(e){return"undefined"!=typeof Event&&Xe(e,Event)}function Ke(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function Xe(e,t){try{return e instanceof t}catch(n){return!1}}function Ze(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function et(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const t=e[i];try{n.push(String(t))}catch(r){n.push("[value cannot be serialized]")}}return n.join(t)}function tt(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!We(e)&&(Ge(t,"RegExp")?t.test(e):!!We(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function nt(e,t,n=250,r,i,s,o){if(!(s.exception&&s.exception.values&&o&&Xe(o.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,l;a&&(s.exception.values=(c=rt(e,t,i,o.originalException,r,s.exception.values,a,0),l=n,c.map((e=>(e.value&&(e.value=Ze(e.value,l)),e)))))}function rt(e,t,n,r,i,s,o,a){if(s.length>=n+1)return s;let c=[...s];if(Xe(r[i],Error)){it(o,a);const s=e(t,r[i]),l=c.length;st(s,i,l,a),c=rt(e,t,n,r[i],i,[s,...c],s,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(Xe(r,Error)){it(o,a);const l=e(t,r),u=c.length;st(l,`errors[${s}]`,u,a),c=rt(e,t,n,r,i,[l,...c],l,u)}})),c}function it(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function st(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function ot(e){return e&&e.Math==Math?e:void 0}const at="object"==typeof globalThis&&ot(globalThis)||"object"==typeof window&&ot(window)||"object"==typeof self&&ot(self)||"object"==typeof k&&ot(k)||function(){return this}()||{};function ct(){return at}function lt(e,t,n){const r=n||at,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}const ut=ct();function dt(e,t={}){try{let n=e;const r=5,i=[];let s=0,o=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&s++<r&&(l=ht(n,u),!("html"===l||s>1&&o+i.length*c+l.length>=d));)i.push(l),o+=l.length,n=n.parentNode;return i.reverse().join(a)}catch(n){return"<unknown>"}}function ht(e,t){const n=e,r=[];let i,s,o,a,c;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&We(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)o=u[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}const pt=["debug","info","warn","error","log","assert","trace"];function ft(e){if(!("console"in at))return e();const t=at.console,n={};pt.forEach((e=>{const r=t[e]&&t[e].__sentry_original__;e in t&&r&&(n[e]=t[e],t[e]=r)}));try{return e()}finally{Object.keys(n).forEach((e=>{t[e]=n[e]}))}}function mt(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?pt.forEach((n=>{t[n]=(...t)=>{e&&ft((()=>{at.console[n](`Sentry Logger [${n}]:`,...t)}))}})):pt.forEach((e=>{t[e]=()=>{}})),t}let vt;vt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?lt("logger",mt):mt();const gt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function yt(e,t=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${o}`}function _t(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}class bt extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Et(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);if("function"==typeof i)try{St(i,r)}catch(s){}e[t]=i}function wt(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function St(e,t){const n=t.prototype||{};e.prototype=t.prototype=n,wt(e,"__sentry_original__",t)}function kt(e){return e.__sentry_original__}function Tt(e){if(Ye(e))return{message:e.message,name:e.name,stack:e.stack,...Mt(e)};if(Qe(e)){const t={type:e.type,target:Ct(e.target),currentTarget:Ct(e.currentTarget),...Mt(e)};return"undefined"!=typeof CustomEvent&&Xe(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Ct(e){try{return"undefined"!=typeof Element&&Xe(e,Element)?dt(e):Object.prototype.toString.call(e)}catch(t){return"<unknown>"}}function Mt(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function At(e){return Ot(e,new Map)}function Ot(e,t){if(He(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const i of Object.keys(e))void 0!==e[i]&&(r[i]=Ot(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(Ot(e,t))})),r}return e}const Dt="<anonymous>";function Pt(e){try{return e&&"function"==typeof e&&e.name||Dt}catch(t){return Dt}}const Lt=ct();function It(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const Nt=ct(),jt=ct(),xt="__sentry_xhr_v2__",Rt={},Ft={};function Ut(e){if(!Ft[e])switch(Ft[e]=!0,e){case"console":"console"in jt&&pt.forEach((function(e){e in jt.console&&Et(jt.console,e,(function(t){return function(...n){qt("console",{args:n,level:e}),t&&t.apply(jt.console,n)}}))}));break;case"dom":!function(){if(!("document"in jt))return;const e=qt.bind(null,"dom"),t=Wt(e,!0);jt.document.addEventListener("click",t,!1),jt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=jt[t]&&jt[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Et(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{const r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},o=s[n]=s[n]||{refCount:0};if(!o.handler){const r=Wt(e);o.handler=r,t.call(this,n,r,i)}o.refCount++}catch(s){}return t.call(this,n,r,i)}})),Et(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,i=n.__sentry_instrumentation_handlers__||{},s=i[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete n.__sentry_instrumentation_handlers__)}catch(i){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in jt))return;const e=XMLHttpRequest.prototype;Et(e,"open",(function(e){return function(...t){const n=t[1],r=this[xt]={method:We(t[0])?t[0].toUpperCase():t[0],url:t[1],request_headers:{}};We(n)&&"POST"===r.method&&n.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[xt];if(e&&4===this.readyState){try{e.status_code=this.status}catch(n){}qt("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?Et(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),Et(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,i=this[xt];return i&&(i.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),Et(e,"send",(function(e){return function(...t){const n=this[xt];return n&&void 0!==t[0]&&(n.body=t[0]),qt("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":(function(){if(!function(){if(!("fetch"in Lt))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(It(Lt.fetch))return!0;let e=!1;const t=Lt.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=It(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e})()&&Et(jt,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Yt(t),method:Vt(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Yt(t),method:Vt(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return qt("fetch",{...i}),e.apply(jt,t).then((e=>(qt("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw qt("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}));break;case"history":!function(){if(!function(){const e=Nt.chrome,t=e&&e.app&&e.app.runtime,n="history"in Nt&&!!Nt.history.pushState&&!!Nt.history.replaceState;return!t&&n}())return;const e=jt.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Gt,t=String(n);Gt=t,qt("history",{from:e,to:t})}return e.apply(this,t)}}jt.onpopstate=function(...t){const n=jt.location.href,r=Gt;if(Gt=n,qt("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(i){}},Et(jt.history,"pushState",t),Et(jt.history,"replaceState",t)}();break;case"error":zt=jt.onerror,jt.onerror=function(e,t,n,r,i){return qt("error",{column:r,error:i,line:n,msg:e,url:t}),!(!zt||zt.__SENTRY_LOADER__)&&zt.apply(this,arguments)},jt.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":Ht=jt.onunhandledrejection,jt.onunhandledrejection=function(e){return qt("unhandledrejection",e),!(Ht&&!Ht.__SENTRY_LOADER__)||Ht.apply(this,arguments)},jt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn("unknown instrumentation type:",e))}}function Bt(e,t){Rt[e]=Rt[e]||[],Rt[e].push(t),Ut(e)}function qt(e,t){if(e&&Rt[e])for(const r of Rt[e]||[])try{r(t)}catch(n){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Pt(r)}\nError:`,n)}}function Vt(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Yt(e){return"string"==typeof e?e:e?Vt(e,"url")?e.url:e.toString?e.toString():"":""}let Gt,$t,Jt;function Wt(e,t=!1){return n=>{if(!n||Jt===n)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(t){}return!0}(n))return;const r="keypress"===n.type?"input":n.type;(void 0===$t||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(n){}return!1}(Jt,n))&&(e({event:n,name:r,global:t}),Jt=n),clearTimeout($t),$t=jt.setTimeout((()=>{$t=void 0}),1e3)}}let zt=null,Ht=null;function Qt(){const e=at,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return"10000000100040008000100000000000".replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Kt(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Xt(e){const{message:t,event_id:n}=e;if(t)return t;const r=Kt(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Zt(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function en(e,t){const n=Kt(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function tn(e){if(e&&e.__sentry_captured__)return!0;try{wt(e,"__sentry_captured__",!0)}catch(t){}return!1}function nn(e,t=100,n=1/0){try{return sn("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function rn(e,t=3,n=102400){const r=nn(e,t);return s=r,i=JSON.stringify(s),~-encodeURI(i).split(/%..|./).length>n?rn(e,t-1,n):r;var i,s}function sn(e,t,n=1/0,r=1/0,i=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,o]=i;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(a=t)||a==a))return t;var a;const c=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==k&&t===k)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(He(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Pt(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(n){return`**non-serializable** (${n})`}var n}(e,t);if(!c.startsWith("[object "))return c;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return c.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return sn("",u.toJSON(),l-1,r,i)}catch(f){}const d=Array.isArray(t)?[]:{};let h=0;const p=Tt(t);for(const m in p){if(!Object.prototype.hasOwnProperty.call(p,m))continue;if(h>=r){d[m]="[MaxProperties ~]";break}const e=p[m];d[m]=sn(m,e,l-1,r,i),h++}return o(t),d}var on,an;function cn(e){return new un((t=>{t(e)}))}function ln(e){return new un(((t,n)=>{n(e)}))}(an=on||(on={}))[an.PENDING=0]="PENDING",an[an.RESOLVED=1]="RESOLVED",an[an.REJECTED=2]="REJECTED";class un{__init(){this._state=on.PENDING}__init2(){this._handlers=[]}constructor(e){un.prototype.__init.call(this),un.prototype.__init2.call(this),un.prototype.__init3.call(this),un.prototype.__init4.call(this),un.prototype.__init5.call(this),un.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new un(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(i){r(i)}else n(t)},e=>{if(t)try{n(t(e))}catch(i){r(i)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new un(((t,n)=>{let r,i;return this.then((t=>{i=!1,r=t,e&&e()}),(t=>{i=!0,r=t,e&&e()})).then((()=>{i?n(r):t(r)}))}))}__init3(){this._resolve=e=>{this._setResult(on.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(on.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===on.PENDING&&(Ke(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===on.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===on.RESOLVED&&e[1](this._value),this._state===on.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function dn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const hn=["fatal","error","warning","log","info","debug"],pn=ct(),fn={nowSeconds:()=>Date.now()/1e3},mn="undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__||"[object process]"!==Object.prototype.toString.call(void 0!==q?q:0)?function(){const{performance:e}=pn;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}():function(){try{return(e=t,e.require("perf_hooks")).performance}catch(n){return}var e}(),vn=void 0===mn?fn:{nowSeconds:()=>(mn.timeOrigin+mn.now())/1e3},gn=fn.nowSeconds.bind(fn),yn=vn.nowSeconds.bind(vn);function _n(e,t=[]){return[e,t]}function bn(e,t){const[n,r]=e;return[n,[...r,t]]}function En(e,t){const n=e[1];for(const r of n)if(t(r,r[0].type))return!0;return!1}function wn(e,t){return(t||new TextEncoder).encode(e)}function Sn(e,t){const[n,r]=e;let i=JSON.stringify(n);function s(e){"string"==typeof i?i="string"==typeof e?i+e:[wn(i,t),e]:i.push("string"==typeof e?wn(e,t):e)}for(const a of r){const[e,t]=a;if(s(`\n${JSON.stringify(e)}\n`),"string"==typeof t||t instanceof Uint8Array)s(t);else{let e;try{e=JSON.stringify(t)}catch(o){e=JSON.stringify(nn(t))}s(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}(i)}function kn(e,t){const n="string"==typeof e.data?wn(e.data,t):e.data;return[At({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}(()=>{const{performance:e}=pn;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=i<t,o=e.timing&&e.timing.navigationStart,a="number"==typeof o?Math.abs(o+n-r):t;(s||a<t)&&i<=a&&e.timeOrigin})();const Tn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function Cn(e){return Tn[e]}function Mn(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}const An="production";function On(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||yn(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Qt()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class Dn{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=In()}static clone(e){const t=new Dn;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata},t._propagationContext={...e._propagationContext}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&On(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof Dn?t:this}return e instanceof Dn?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):He(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=In(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:gn(),...e};return this._breadcrumbs=[...this._breadcrumbs,r].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const n=t.name;n&&(e.tags={transaction:n,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...Pn(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(e,t,n,r=0){return new un(((i,s)=>{const o=e[r];if(null===t||"function"!=typeof o)i(t);else{const a=o({...t},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.id&&null===a&&vt.log(`Event processor "${o.id}" dropped event`),Ke(a)?a.then((t=>this._notifyEventProcessors(e,t,n,r+1).then(i))).then(null,s):this._notifyEventProcessors(e,a,n,r+1).then(i).then(null,s)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){var t;e.fingerprint=e.fingerprint?(t=e.fingerprint,Array.isArray(t)?t:[t]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function Pn(){return lt("globalEventProcessors",(()=>[]))}function Ln(e){Pn().push(e)}function In(){return{traceId:Qt(),spanId:Qt().substring(16),sampled:!1}}const Nn=100;class jn{constructor(e,t=new Dn,n=4){this._version=n,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Dn.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Qt(),r=new Error("Sentry syntheticException");return this._withClient(((i,s)=>{i.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},s)})),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Qt(),i=new Error(e);return this._withClient(((s,o)=>{s.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},o)})),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Qt();return e.type||(this._lastEventId=n),this._withClient(((r,i)=>{r.captureEvent(e,{...t,event_id:n},i)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=Nn}=r.getOptions&&r.getOptions()||{};if(s<=0)return;const o={timestamp:gn(),...e},a=i?ft((()=>i(o,t))):o;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,s))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Rn(this);try{e(this)}finally{Rn(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(n){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);return"undefined"!=typeof __SENTRY_DEBUG__&&__SENTRY_DEBUG__,n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e){let t={};"ok"===e.status&&(t={status:"exited"}),On(e,t)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:i=An}=n&&n.getOptions()||{},{userAgent:s}=at.navigator||{},o=function(e){const t=yn(),n={sid:Qt(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>{return At({sid:`${(e=n).sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}});var e}};return e&&On(n,e),n}({release:r,environment:i,user:t.getUser(),...s&&{userAgent:s},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&On(a,{status:"exited"}),this.endSession(),t.setSession(o),o}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_withClient(e){const{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){const n=xn().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function xn(){return at.__SENTRY__=at.__SENTRY__||{extensions:{},hub:void 0},at}function Rn(e){const t=xn(),n=Un(t);return Bn(t,e),n}function Fn(){const e=xn();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=xn()){var t;return(t=e)&&t.__SENTRY__&&t.__SENTRY__.hub&&!Un(e).isOlderThan(4)||Bn(e,new jn),Un(e)}(e)}function Un(e){return lt("hub",(()=>new jn),e)}function Bn(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const qn=[];function Vn(e,t){t[e.name]=e,-1===qn.indexOf(e.name)&&(e.setupOnce(Ln,Fn),qn.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.log(`Integration installed: ${e.name}`))}const Yn=new WeakMap,Gn="Not capturing exception because it's already been captured.";class $n{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if($n.prototype.__init.call(this),$n.prototype.__init2.call(this),$n.prototype.__init3.call(this),$n.prototype.__init4.call(this),$n.prototype.__init5.call(this),this._options=e,e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=gt.exec(e);if(!t)return;const[n,r,i="",s,o="",a]=t.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return _t({host:s,pass:i,path:c,projectId:l,port:o,protocol:n,publicKey:r})}(e):_t(e);if(t&&function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(vt.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(vt.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(vt.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(vt.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}(e.dsn):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn("No DSN provided, client will not do anything."),this._dsn){const t=function(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${i=e,`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(i)}${i.projectId}/envelope/`}?${function(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}(e,r)}`;var i}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(tn(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.log(Gn));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let i=n&&n.event_id;const s=ze(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(s.then((e=>this._captureEvent(e,n,r))).then((e=>{i=e}))),i}captureEvent(e,t,n){if(t&&t.originalException&&tn(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.log(Gn));let r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{r=e}))),r}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),On(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e)))):cn(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const t={};return e.forEach((e=>{e&&Vn(e,t)})),t}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Vn(e,this._integrations)}sendEvent(e,t={}){if(this._dsn){let n=function(e,t,n,r){const i=Mn(n),s=e.type&&"replay_event"!==e.type?e.type:"event";var o,a;o=e,(a=n&&n.sdk)&&(o.sdk=o.sdk||{},o.sdk.name=o.sdk.name||a.name,o.sdk.version=o.sdk.version||a.version,o.sdk.integrations=[...o.sdk.integrations||[],...a.integrations||[]],o.sdk.packages=[...o.sdk.packages||[],...a.packages||[]]);const c=function(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:yt(r)},...i&&{trace:At({...i})}}}(e,i,r,t);return delete e.sdkProcessingMetadata,_n(c,[[{type:s},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=bn(n,kn(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}}sendSession(e){if(this._dsn){const t=function(e,t,n,r){const i=Mn(n);return _n({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!r&&{dsn:yt(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let n=!1,r=!1;const i=t.exception&&t.exception.values;if(i){r=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(On(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new un((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){const r=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),function(e,t,n,r){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=e,o={...t,event_id:t.event_id||n.event_id||Qt(),timestamp:t.timestamp||gn()},a=n.integrations||e.integrations.map((e=>e.name));var c,l;!function(e,t){const{environment:n,release:r,dist:i,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:An),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=Ze(e.message,s));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Ze(o.value,s));const a=e.request;a&&a.url&&(a.url=Ze(a.url,s))}(o,e),c=o,(l=a).length>0&&(c.sdk=c.sdk||{},c.sdk.integrations=[...c.sdk.integrations||[],...l]),void 0===t.type&&function(e,t){const n=at._sentryDebugIds;if(!n)return;let r;const i=Yn.get(t);i?r=i:(r=new Map,Yn.set(t,r));const s=Object.keys(n).reduce(((e,i)=>{let s;const o=r.get(i);o?s=o:(s=t(i),r.set(i,s));for(let t=s.length-1;t>=0;t--){const r=s[t];if(r.filename){e[r.filename]=n[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(o){}}(o,e.stackParser);let u=r;n.captureContext&&(u=Dn.clone(u).update(n.captureContext));let d=cn(o);if(u){if(u.getAttachments){const e=[...n.attachments||[],...u.getAttachments()];e.length&&(n.attachments=e)}d=u.applyToEvent(o,n)}return d.then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(r){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:nn(e.data,t,n)}})))},...e.user&&{user:nn(e.user,t,n)},...e.contexts&&{contexts:nn(e.contexts,t,n)},...e.extra&&{extra:nn(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=nn(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map((e=>(e.data&&(e.data=nn(e.data,t,n)),e)))),r}(e,i,s):e)))}(r,e,t,n).then((e=>{if(null===e)return e;const{propagationContext:t}=e.sdkProcessingMetadata||{};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:r,spanId:i,parentSpanId:s,dsc:o}=t;e.contexts={trace:{trace_id:r,span_id:i,parent_span_id:s},...e.contexts};const a=o||function(e,t,n){const r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},o=At({environment:r.environment||An,release:r.release,user_segment:s,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",o),o}(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?vt.log(t.message):vt.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:i}=r;if(!this._isEnabled())return ln(new bt("SDK not enabled, will not capture event.","log"));const s=Wn(e),o=Jn(e),a=e.type||"error",c=`before send for type \`${a}\``;if(o&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),ln(new bt(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const l="replay_event"===a?"replay":a;return this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new bt("An event processor returned `null`, will not send event.","log");return t.data&&!0===t.data.__sentry__?n:function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Ke(e))return e.then((e=>{if(!He(e)&&null!==e)throw new bt(n);return e}),(e=>{throw new bt(`${t} rejected with ${e}`)}));if(!He(e)&&null!==e)throw new bt(n);return e}(function(e,t,n){const{beforeSend:r,beforeSendTransaction:i}=e;return Jn(t)&&r?r(t,n):Wn(t)&&i?i(t,n):t}(r,n,t),c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",l,e),new bt(`${c} returned \`null\`, will not send event.`,"log");const i=n&&n.getSession();!s&&i&&this._updateSessionFromEvent(i,r);const o=r.transaction_info;if(s&&o&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...o,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof bt)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new bt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.error("Error while sending event:",e)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function Jn(e){return void 0===e.type}function Wn(e){return"transaction"===e.type}function zn(e,t,n=function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return ln(new bt("Not adding Promise because buffer limit was reached."));const i=r();return-1===t.indexOf(i)&&t.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(e){return new un(((n,r)=>{let i=t.length;if(!i)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{cn(e).then((()=>{--i||(clearTimeout(s),n(!0))}),r)}))}))}}}(e.bufferSize||30)){let r={};function i(i){const s=[];if(En(i,((t,n)=>{const i=Cn(n);if(function(e,t,n=Date.now()){return((r=e)[t]||r.all||0)>n;var r}(r,i)){const r=Hn(t,n);e.recordDroppedEvent("ratelimit_backoff",i,r)}else s.push(t)})),0===s.length)return cn();const o=_n(i[0],s),a=t=>{En(o,((n,r)=>{const i=Hn(n,r);e.recordDroppedEvent(t,Cn(r),i)}))};return n.add((()=>t({body:Sn(o,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=function(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[e,t]=a.split(":",2),n=parseInt(e,10),s=1e3*(isNaN(n)?60:n);if(t)for(const o of t.split(";"))i[o]=r+s;else i.all=r+s}else o?i.all=r+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(o,r):429===t&&(i.all=r+6e4);return i}(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof bt)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.error("Skipped sending event because buffer is full."),a("queue_overflow"),cn();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>n.drain(e)}}function Hn(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}const Qn="7.60.1";let Kn;class Xn{constructor(){Xn.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Xn.id}setupOnce(){Kn=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=kt(this)||this;return Kn.apply(t,e)}}catch(an){}}}Xn.__initStatic();const Zn=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],er=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class tr{static __initStatic(){this.id="InboundFilters"}__init(){this.name=tr.id}constructor(e={}){this._options=e,tr.prototype.__init.call(this)}setupOnce(e,t){const n=e=>{const n=t();if(n){const t=n.getIntegration(tr);if(t){const a=n.getClient(),c=a?a.getOptions():{},l=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Zn],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:er],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,c);return r=e,((i=l).ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(t){}return!1}(r)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Xt(r)}`),1):(s=r,o=i.ignoreErrors,!s.type&&o&&o.length&&function(e){if(e.message)return[e.message];if(e.exception){const{values:n}=e.exception;try{const{type:e="",value:t=""}=n&&n[n.length-1]||{};return[`${t}`,`${e}: ${t}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.error(`Cannot extract message for event ${Xt(e)}`),[]}}return[]}(s).some((e=>tt(e,o)))?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Xt(r)}`),1):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&tt(n,t)}(r,i.ignoreTransactions)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Xt(r)}`),1):function(e,t){if(!t||!t.length)return!1;const n=nr(e);return!!n&&tt(n,t)}(r,i.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Xt(r)}.\nUrl: ${nr(r)}`),1):!function(e,t){if(!t||!t.length)return!0;const n=nr(e);return!n||tt(n,t)}(r,i.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Xt(r)}.\nUrl: ${nr(r)}`),1)))?null:e}}var r,i,s,o;return e};n.id=this.name,e(n)}}function nr(e){try{let n;try{n=e.exception.values[0].stacktrace.frames}catch(t){}return n?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch(n){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.error(`Cannot extract url for event ${Xt(e)}`),null}}tr.__initStatic();var rr=Object.freeze({__proto__:null,FunctionToString:Xn,InboundFilters:tr});const ir=at;let sr=0;function or(){return sr>0}function ar(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(kt(e))return e}catch(i){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const i=r.map((e=>ar(e,t)));return e.apply(this,i)}catch(s){throw sr++,setTimeout((()=>{sr--})),i=e=>{var n;e.addEventProcessor((e=>(t.mechanism&&(Zt(e,void 0),en(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),n=s,Fn().captureException(n,{captureContext:void 0})},Fn().withScope(i),s}var i};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(s){}St(r,e),wt(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(s){}return r}function cr(e,t){const n=ur(e,t),r={type:t&&t.name,value:hr(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function lr(e,t){return{exception:{values:[cr(e,t)]}}}function ur(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(dr.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(i){}return[]}const dr=/Minified React error #\d+;/i;function hr(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function pr(e,t,n,r,i){let s;if($e(t)&&t.error)return lr(e,t.error);if(Je(t)||Ge(t,"DOMException")){const i=t;if("stack"in t)s=lr(e,t);else{const t=i.name||(Je(i)?"DOMError":"DOMException"),o=i.message?`${t}: ${i.message}`:t;s=fr(e,o,n,r),Zt(s,o)}return"code"in i&&(s.tags={...s.tags,"DOMException.code":`${i.code}`}),s}return Ye(t)?lr(e,t):He(t)||Qe(t)?(s=function(e,t,n,r){const i=Fn().getClient(),s=i&&i.getOptions().normalizeDepth,o={exception:{values:[{type:Qe(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:mr(t,{isUnhandledRejection:r})}]},extra:{__serialized__:rn(t,s)}};if(n){const t=ur(e,n);t.length&&(o.exception.values[0].stacktrace={frames:t})}return o}(e,t,n,i),en(s,{synthetic:!0}),s):(s=fr(e,t,n,r),Zt(s,`${t}`),en(s,{synthetic:!0}),s)}function fr(e,t,n,r){const i={message:t};if(r&&n){const r=ur(e,n);r.length&&(i.exception={values:[{value:t,stacktrace:{frames:r}}]})}return i}function mr(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Tt(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ze(n[0],t);for(let r=n.length;r>0;r--){const e=n.slice(0,r).join(", ");if(!(e.length>t))return r===n.length?e:Ze(e,t)}return""}(e),r=t?"promise rejection":"exception";return $e(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Qe(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(t){}}(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}const vr="Breadcrumbs";class gr{static __initStatic(){this.id=vr}__init(){this.name=gr.id}constructor(e){gr.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&Bt("console",yr),this.options.dom&&Bt("dom",function(e){return function(t){let n,r="object"==typeof e?e.serializeAttribute:void 0,i="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;i&&i>1024&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=1024),"string"==typeof r&&(r=[r]);try{const e=t.event;n=(s=e)&&s.target?dt(e.target,{keyAttrs:r,maxStringLength:i}):dt(e,{keyAttrs:r,maxStringLength:i})}catch(o){n="<unknown>"}var s;0!==n.length&&Fn().addBreadcrumb({category:`ui.${t.name}`,message:n},{event:t.event,name:t.name,global:t.global})}}(this.options.dom)),this.options.xhr&&Bt("xhr",_r),this.options.fetch&&Bt("fetch",br),this.options.history&&Bt("history",Er)}addSentryBreadcrumb(e){this.options.sentry&&Fn().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Xt(e)},{event:e})}}function yr(e){for(let r=0;r<e.args.length;r++)if("ref=Ref<"===e.args[r]){e.args[r+1]="viewRef";break}const t={category:"console",data:{arguments:e.args,logger:"console"},level:(n=e.level,"warn"===n?"warning":hn.includes(n)?n:"log"),message:et(e.args," ")};var n;if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${et(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}Fn().addBreadcrumb(t,{input:e.args,level:e.level})}function _r(e){const{startTimestamp:t,endTimestamp:n}=e,r=e.xhr[xt];if(!t||!n||!r)return;const{method:i,url:s,status_code:o,body:a}=r,c={method:i,url:s,status_code:o},l={xhr:e.xhr,input:a,startTimestamp:t,endTimestamp:n};Fn().addBreadcrumb({category:"xhr",data:c,type:"http"},l)}function br(e){const{startTimestamp:t,endTimestamp:n}=e;if(n&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){const r=e.fetchData,i={data:e.error,input:e.args,startTimestamp:t,endTimestamp:n};Fn().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},i)}else{const r={...e.fetchData,status_code:e.response&&e.response.status},i={input:e.args,response:e.response,startTimestamp:t,endTimestamp:n};Fn().addBreadcrumb({category:"fetch",data:r,type:"http"},i)}}function Er(e){let t=e.from,n=e.to;const r=dn(ir.location.href);let i=dn(t);const s=dn(n);i.path||(i=r),r.protocol===s.protocol&&r.host===s.host&&(n=s.relative),r.protocol===i.protocol&&r.host===i.host&&(t=i.relative),Fn().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}gr.__initStatic();class wr extends $n{constructor(e){const t=ir.SENTRY_SDK_SOURCE||"npm";e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:Qn}],version:Qn},super(e),e.sendClientReports&&ir.document&&ir.document.addEventListener("visibilitychange",(()=>{"hidden"===ir.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,r){const i=pr(e,t,n&&n.syntheticException||void 0,r);return en(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),cn(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,i){const s=fr(e,t,r&&r.syntheticException||void 0,i);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),cn(s)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}sendEvent(e,t){const n=this.getIntegrationById(vr);n&&n.addSentryBreadcrumb&&n.addSentryBreadcrumb(e),super.sendEvent(e,t)}captureUserFeedback(e){if(!this._isEnabled())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:n,dsn:r}){return _n({event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:yt(r)}},[function(e){return[{type:"user_report"},e]}(e)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.log("Sending outcomes:",e);const t=(n=e,_n((r=this._options.tunnel&&yt(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:gn(),discarded_events:n}]]));var n,r;this._sendEnvelope(t)}}let Sr;function kr(e,t=function(){if(Sr)return Sr;if(It(ir.fetch))return Sr=ir.fetch.bind(ir);const e=ir.document;let t=ir.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Sr=t.bind(ir)}()){let n=0,r=0;return zn(e,(function(i){const s=i.body.length;n+=s,r++;const o={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,o).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(a){return Sr=void 0,n-=s,r--,ln(a)}}))}class Tr{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Tr.id}__init2(){this._installFunc={onerror:Cr,onunhandledrejection:Mr}}constructor(e){Tr.prototype.__init.call(this),Tr.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const n in e){const r=this._installFunc[n];r&&e[n]&&(t=n,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.log(`Global Handler attached: ${t}`),r(),this._installFunc[n]=void 0)}var t}}function Cr(){Bt("error",(e=>{const[t,n,r]=Dr();if(!t.getIntegration(Tr))return;const{msg:i,url:s,line:o,column:a,error:c}=e;if(or()||c&&c.__sentry_own_request__)return;const l=void 0===c&&We(i)?function(e,t,n,r){let i=$e(e)?e.message:e,s="Error";const o=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);return o&&(s=o[1],i=o[2]),Ar({exception:{values:[{type:s,value:i}]}},t,n,r)}(i,s,o,a):Ar(pr(n,c||i,void 0,r,!1),s,o,a);l.level="error",Or(t,c,l,"onerror")}))}function Mr(){Bt("unhandledrejection",(e=>{const[t,n,r]=Dr();if(!t.getIntegration(Tr))return;let i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(o){}if(or()||i&&i.__sentry_own_request__)return!0;const s=ze(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:pr(n,i,void 0,r,!0);s.level="error",Or(t,i,s,"onunhandledrejection")}))}function Ar(e,t,n,r){const i=e.exception=e.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=We(t)&&t.length>0?t:function(){try{return ut.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function Or(e,t,n,r){en(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function Dr(){const e=Fn(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}Tr.__initStatic();const Pr=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Lr{static __initStatic(){this.id="TryCatch"}__init(){this.name=Lr.id}constructor(e){Lr.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&Et(ir,"setTimeout",Ir),this._options.setInterval&&Et(ir,"setInterval",Ir),this._options.requestAnimationFrame&&Et(ir,"requestAnimationFrame",Nr),this._options.XMLHttpRequest&&"XMLHttpRequest"in ir&&Et(XMLHttpRequest.prototype,"send",jr);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:Pr).forEach(xr)}}function Ir(e){return function(...t){const n=t[0];return t[0]=ar(n,{mechanism:{data:{function:Pt(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function Nr(e){return function(t){return e.apply(this,[ar(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Pt(e)},handled:!0,type:"instrument"}})])}}function jr(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&Et(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Pt(t)},handled:!0,type:"instrument"}},r=kt(t);return r&&(n.mechanism.data.handler=Pt(r)),ar(t,n)}))})),e.apply(this,t)}}function xr(e){const t=ir,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Et(n,"addEventListener",(function(t){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=ar(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Pt(r),target:e},handled:!0,type:"instrument"}}))}catch(s){}return t.apply(this,[n,ar(r,{mechanism:{data:{function:"addEventListener",handler:Pt(r),target:e},handled:!0,type:"instrument"}}),i])}})),Et(n,"removeEventListener",(function(e){return function(t,n,r){const i=n;try{const n=i&&i.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(s){}return e.call(this,t,i,r)}})))}Lr.__initStatic();class Rr{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Rr.id}constructor(e={}){Rr.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(e,t){e(((e,n)=>{const r=t(),i=r.getClient(),s=r.getIntegration(Rr);if(!i||!s)return e;const o=i.getOptions();return nt(cr,o.stackParser,o.maxValueLength,s._key,s._limit,e,n),e}))}}Rr.__initStatic();class Fr{constructor(){Fr.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Fr.id}setupOnce(){Ln((e=>{if(Fn().getIntegration(Fr)){if(!ir.navigator&&!ir.location&&!ir.document)return e;const t=e.request&&e.request.url||ir.location&&ir.location.href,{referrer:n}=ir.document||{},{userAgent:r}=ir.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:i};return{...e,request:s}}return e}))}}Fr.__initStatic();class Ur{constructor(){Ur.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Ur.id}setupOnce(e,t){const n=e=>{if(e.type)return e;const n=t().getIntegration(Ur);if(n){try{if(r=e,(i=n._previousEvent)&&(function(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!qr(e,t)||!Br(e,t))}(r,i)||function(e,t){const n=Vr(t),r=Vr(e);return!!(n&&r&&n.type===r.type&&n.value===r.value&&qr(e,t)&&Br(e,t))}(r,i)))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&vt.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(i){return n._previousEvent=e}return n._previousEvent=e}var r,i;return e};n.id=this.name,e(n)}}function Br(e,t){let n=Yr(e),r=Yr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const e=r[i],t=n[i];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function qr(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(i){return!1}}function Vr(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Yr(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(n){return}}Ur.__initStatic();var Gr=Object.freeze({__proto__:null,Breadcrumbs:gr,Dedupe:Ur,GlobalHandlers:Tr,HttpContext:Fr,LinkedErrors:Rr,TryCatch:Lr});let $r={};ir.Sentry&&ir.Sentry.Integrations&&($r=ir.Sentry.Integrations);const Jr={...$r,...rr,...Gr};var Wr="new",zr="loading",Hr="loaded",Qr="joining-meeting",Kr="joined-meeting",Xr="left-meeting",Zr="error",ei="unknown",ti="full",ni="base",ri="iframe-ready-for-launch-config",ii="iframe-launch-config",si="theme-updated",oi="loading",ai="load-attempt-failed",ci="loaded",li="started-camera",ui="camera-error",di="joining-meeting",hi="joined-meeting",pi="left-meeting",fi="participant-joined",mi="participant-updated",vi="participant-left",gi="participant-counts-updated",yi="access-state-updated",_i="meeting-session-summary-updated",bi="meeting-session-state-updated",Ei="waiting-participant-added",wi="waiting-participant-updated",Si="waiting-participant-removed",ki="track-started",Ti="track-stopped",Ci="transcription-started",Mi="transcription-stopped",Ai="transcription-error",Oi="recording-started",Di="recording-stopped",Pi="recording-stats",Li="recording-error",Ii="recording-upload-completed",Ni="recording-data",ji="app-message",xi="transcription-message",Ri="remote-media-player-started",Fi="remote-media-player-updated",Ui="remote-media-player-stopped",Bi="local-screen-share-started",qi="local-screen-share-stopped",Vi="local-screen-share-canceled",Yi="active-speaker-change",Gi="active-speaker-mode-change",$i="network-quality-change",Ji="network-connection",Wi="cpu-load-change",zi="face-counts-updated",Hi="fullscreen",Qi="exited-fullscreen",Ki="live-streaming-started",Xi="live-streaming-updated",Zi="live-streaming-stopped",es="live-streaming-error",ts="lang-updated",ns="receive-settings-updated",rs="input-settings-updated",is="nonfatal-error",ss="error",os=4096,as=102400,cs="iframe-call-message",ls="local-screen-start",us="daily-method-update-live-streaming-endpoints",ds="transmit-log",hs="daily-custom-track",ps={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},fs={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},ms={PLAY:"play",PAUSE:"pause"},vs=["jpg","png","jpeg"],gs="sip-call-transfer";function ys(){return!_s()&&"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function _s(){return"undefined"!=typeof navigator&&navigator.product&&"ReactNative"===navigator.product}function bs(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function Es(){if(_s())return!1;if(!document)return!1;var e=document.createElement("iframe");return!!e.requestFullscreen||!!e.webkitRequestFullscreen}var ws=function(){try{var e=document.createElement("canvas"),t=null!=e.getContext("webgl2");return e.remove(),t}catch(n){return!1}}();function Ss(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!_s()&&!!ws&&(e?!Ms()&&["Chrome","Firefox"].includes(As()):function(){if(Ms())return!1;var e=As();if("Safari"===e){var t=Is();if(t.major<15||15===t.major&&t.minor<4)return!1}return"Chrome"===e?Ds().major>=77:"Firefox"===e?Ns().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function ks(){if(_s())return!1;if(Cs())return!1;if("undefined"==typeof AudioWorkletNode)return!1;switch(As()){case"Chrome":case"Firefox":return!0;case"Safari":return Os().major>=17}return!1}function Ts(){return bs()&&!function(){var e,t=As();if(!ys())return!0;switch(t){case"Chrome":return(e=Ds()).major&&e.major>0&&e.major<75;case"Firefox":return(e=Ns()).major<91;case"Safari":return(e=Is()).major<13||13===e.major&&e.minor<1;default:return!0}}()}function Cs(){return ys().match(/Linux; Android/)}function Ms(){var e,t,n=ys(),r=n.match(/Mac/)&&(!_s()&&"undefined"!=typeof window&&null!==(e=window)&&void 0!==e&&null!==(t=e.navigator)&&void 0!==t&&t.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(n.match(/Mobi/)||n.match(/Android/)||r)||!!ys().match(/DailyAnd\//)||void 0}function As(){if("undefined"!=typeof window){var e=ys();return Ps()?"Safari":e.indexOf("Edge")>-1?"Edge":e.match(/Chrome\//)?"Chrome":e.indexOf("Safari")>-1||Ls()?"Safari":e.indexOf("Firefox")>-1?"Firefox":e.indexOf("MSIE")>-1||e.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function Os(){switch(As()){case"Chrome":return Ds();case"Safari":return Is();case"Firefox":return Ns();case"Edge":return function(){var e=0,t=0;if("undefined"!=typeof window){var n=ys().match(/Edge\/(\d+).(\d+)/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2])}catch(r){}}return{major:e,minor:t}}()}}function Ds(){var e=0,t=0,n=0,r=0,i=!1;if("undefined"!=typeof window){var s=ys(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{e=parseInt(o[1]),t=parseInt(o[2]),n=parseInt(o[3]),r=parseInt(o[4]),i=s.indexOf("OPR/")>-1}catch(a){}}return{major:e,minor:t,build:n,patch:r,opera:i}}function Ps(){return!!ys().match(/iPad|iPhone|iPod/i)&&bs()}function Ls(){return ys().indexOf("AppleWebKit/605.1.15")>-1}function Is(){var e=0,t=0,n=0;if("undefined"!=typeof window){var r=ys().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{e=parseInt(r[1]),t=parseInt(r[2]),n=parseInt(r[4])}catch(i){}else(Ps()||Ls())&&(e=14,t=0,n=3)}return{major:e,minor:t,point:n}}function Ns(){var e=0,t=0;if("undefined"!=typeof window){var n=ys().match(/Firefox\/(\d+).(\d+)/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2])}catch(r){}}return{major:e,minor:t}}var js=function(){function e(){Y(this,e)}return W(e,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,n){Fe()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,n){Fe()}},{key:"sendMessageToCallMachine",value:function(e,t,n,r){Fe()}},{key:"sendMessageToDailyJs",value:function(e,t){Fe()}},{key:"removeListener",value:function(e){Fe()}}]),e}();function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fs=function(){Q(t,js);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var i=X(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}(t);function t(){var n;return Y(this,t),(n=e.call(this))._wrappedListeners={},n._messageCallbacks={},n}return W(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,n){var r=this,i=function(i){if(i.data&&"iframe-call-message"===i.data.what&&(!i.data.callClientId||i.data.callClientId===t)&&(!i.data.from||"module"!==i.data.from)){var s=Rs({},i.data);if(delete s.from,s.callbackStamp&&r._messageCallbacks[s.callbackStamp]){var o=s.callbackStamp;r._messageCallbacks[o].call(n,s),delete r._messageCallbacks[o]}delete s.what,delete s.callbackStamp,e.call(n,s)}};this._wrappedListeners[e]=i,window.addEventListener("message",i)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,n){var r=function(r){var i;if(!(!r.data||r.data.what!==cs||!r.data.action||r.data.from&&"module"!==r.data.from||r.data.callClientId&&t&&r.data.callClientId!==t||null!=r&&null!==(i=r.data)&&void 0!==i&&i.callFrameId)){var s=r.data;e.call(n,s)}};this._wrappedListeners[e]=r,window.addEventListener("message",r)}},{key:"sendMessageToCallMachine",value:function(e,t,n,r){if(!n)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var i=Rs({},e);if(i.what=cs,i.from="module",i.callClientId=n,t){var s=Re();this._messageCallbacks[s]=t,i.callbackStamp=s}var o=r?r.contentWindow:window,a=this._callMachineTargetOrigin(r);a&&o.postMessage(i,a)}},{key:"sendMessageToDailyJs",value:function(e,t){e.what=cs,e.callClientId=t,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener("message",t),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,t,n){var r=Rs({},e);r.callClientId=n;var i=t?t.contentWindow:window,s=this._callMachineTargetOrigin(t);s&&i.postMessage(r,s)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,t){var n=function(n){if(n.data&&"iframe-call-message"===n.data.what&&(!n.data.callClientId||n.data.callClientId===t)&&(!n.data.from||"module"!==n.data.from)){var r=n.data;e(r)}};return this._wrappedListeners[e]=n,window.addEventListener("message",n),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener("message",t),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return"file:"===window.location.protocol?"*":window.location.origin}}]),t}();function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Bs=function(){Q(t,js);var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var i=X(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}(t);function t(){var n;return Y(this,t),n=e.call(this),k.callMachineToDailyJsEmitter=k.callMachineToDailyJsEmitter||new se.EventEmitter,k.dailyJsToCallMachineEmitter=k.dailyJsToCallMachineEmitter||new se.EventEmitter,n._wrappedListeners={},n._messageCallbacks={},n}return W(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,n){this._addListener(e,k.callMachineToDailyJsEmitter,t,n,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,n){this._addListener(e,k.dailyJsToCallMachineEmitter,t,n,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,t,n){this._sendMessage(e,k.dailyJsToCallMachineEmitter,n,t,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,t){this._sendMessage(e,k.callMachineToDailyJsEmitter,t,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var t=this._wrappedListeners[e];t&&(k.callMachineToDailyJsEmitter.removeListener("message",t),k.dailyJsToCallMachineEmitter.removeListener("message",t),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,t,n,r,i){var s=this,o=function(t){if(t.callClientId===n){if(t.callbackStamp&&s._messageCallbacks[t.callbackStamp]){var i=t.callbackStamp;s._messageCallbacks[i].call(r,t),delete s._messageCallbacks[i]}e.call(r,t)}};this._wrappedListeners[e]=o,t.addListener("message",o)}},{key:"_sendMessage",value:function(e,t,n,r,i){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);if(s.callClientId=n,r){var o=Re();this._messageCallbacks[o]=r,s.callbackStamp=o}t.emit("message",s)}}]),t}(),qs="replace",Vs="shallow-merge",Ys=[qs,Vs],Gs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,r=t.mergeStrategy,i=void 0===r?qs:r;Y(this,e),e._validateMergeStrategy(i),e._validateData(n,i),this.mergeStrategy=i,this.data=n}return W(e,[{key:"isNoOp",value:function(){return e.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,t){return 0===Object.keys(e).length&&t===Vs}},{key:"_validateMergeStrategy",value:function(e){if(!Ys.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Ys,"]"))}},{key:"_validateData",value:function(e,t){if(!function(e){if(null==e||"object"!==G(e))return!1;var t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var n;try{if(n=JSON.stringify(e),t===qs)Se(JSON.parse(n),e);else if(t===Vs)for(var r in e)if(Object.hasOwnProperty.call(e,r)&&void 0!==e[r]){var i=JSON.parse(JSON.stringify(e[r]));Se(e[r],i)}}catch(s){throw Error("Meeting session data must be serializable to JSON: ".concat(s))}if(n.length>as)throw Error("Meeting session data is too large (".concat(n.length," characters). Maximum size suppported is ").concat(as,"."))}}]),e}();function $s(e,t,n){return($s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&H(i,n.prototype),i}).apply(null,arguments)}function Js(e){var t="function"==typeof Map?new Map:void 0;return Js=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return $s(e,arguments,X(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),H(r,e)},Js(e)}function Ws(e){var t,n=null===(t=window._daily)||void 0===t?void 0:t.pendings;if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}var zs=function(){function e(t){Y(this,e),this._currentLoad=null,this._callClientId=t}return W(e,[{key:"load",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void r(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new Hs(n,(function(){r(!1)}),(function(e,n){n||Ws(t._callClientId),i(e,n)})),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Ws(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),e}(),Hs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;Y(this,e),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=t,this._successCallback=n,this._failureCallback=r}return W(e,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new Xs(this._dailyConfig,this._successCallback,(function t(n){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(n,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout((function(){e._currentAttempt.cancelled||(e._currentAttempt=new Xs(e._dailyConfig,e._successCallback,t),e._currentAttempt.start())}),3e3))})),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),e}(),Qs=function(){Q(t,Js(Error));var e=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var i=X(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}(t);function t(){return Y(this,t),e.apply(this,arguments)}return W(t)}(),Ks=2e4,Xs=function(){function e(t,n,r){Y(this,e),this._loadAttemptImpl=_s()||!t.avoidEval?new Zs(t,n,r):new eo(t,n,r)}var t;return W(e,[{key:"start",value:(t=te((function*(){return this._loadAttemptImpl.start()})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),e}(),Zs=function(){function e(t,n,r){Y(this,e),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache="undefined"!=typeof iOSCallObjectBundleCache&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=t,this._successCallback=n,this._failureCallback=r}var t,n,r,i;return W(e,[{key:"start",value:(i=te((function*(){var e=Be(this._dailyConfig);!(yield this._tryLoadFromIOSCache(e))&&this._loadFromNetwork(e)})),function(){return i.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=te((function*(e){if(!this._iosCache)return!1;try{var t=yield this._iosCache.get(e);return!!this.cancelled||!!t&&(t.code?(Function('"use strict";'+t.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=t.refetchHeaders,!1))}catch(n){return!1}})),function(e){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(n=te((function*(e){var t=this;this._networkTimeout=setTimeout((function(){t._networkTimedOut=!0,t._failureCallback({msg:"Timed out (>".concat(Ks," ms) when loading call object bundle ").concat(e),type:"timeout"})}),Ks);try{var n=this._refetchHeaders?{headers:this._refetchHeaders}:{},r=yield fetch(e,n);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new Qs;var i=yield this._getBundleCodeFromResponse(e,r);if(this.cancelled)throw new Qs;Function('"use strict";'+i)(),this._iosCache&&this._iosCache.set(e,i,r.headers),this.succeeded=!0,this._successCallback()}catch(s){if(clearTimeout(this._networkTimeout),s instanceof Qs||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(e,": ").concat(s),type:s.message})}})),function(e){return n.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(t=te((function*(e,t){if(t.ok)return yield t.text();if(this._iosCache&&304===t.status)return(yield this._iosCache.renew(e,t.headers)).code;throw new Error("Received ".concat(t.status," response"))})),function(e,n){return t.apply(this,arguments)})}]),e}(),eo=function(){function e(t,n,r){Y(this,e),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=t,this._successCallback=n,this._failureCallback=r,this._attemptId=Re(),this._networkTimeout=null,this._scriptElement=null}return W(e,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=Be(this._dailyConfig);"object"===("undefined"==typeof document?"undefined":G(document))?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var t=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout((function(){t._stopLoading(),t._failureCallback({msg:"Timed out (>".concat(Ks," ms) when loading call object bundle ").concat(e),type:"timeout"})}),Ks);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");this._scriptElement=r,r.onload=function(){t._stopLoading(),t.succeeded=!0,t._successCallback()},r.onerror=function(e){t._stopLoading(),t._failureCallback({msg:"Failed to load call object bundle ".concat(e.target.src),type:e.message})},r.src=e,n.appendChild(r)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),e}(),to=function(e,t,n){return!0===io(e.local,t,n)},no=function(e,t,n){return e.local.streams&&e.local.streams[t]&&e.local.streams[t].stream&&e.local.streams[t].stream["get".concat("video"===n?"Video":"Audio","Tracks")]()[0]},ro=function(e,t,n,r){var i=so(e,t,n,r);return i&&i.pendingTrack},io=function(e,t,n){if(!e)return!1;var r=function(e){switch(e){case"avatar":return!0;case"staged":return e;default:return!!e}},i=e.public.subscribedTracks;return i&&i[t]?-1===["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)&&i[t].custom?[!0,"staged"].includes(i[t].custom)?r(i[t].custom):r(i[t].custom[n]):r(i[t][n]):!i||r(i.ALL)},so=function(e,t,n,r){var i=Object.values(e.streams||{}).filter((function(e){return e.participantId===t&&e.type===n&&e.pendingTrack&&e.pendingTrack.kind===r})).sort((function(e,t){return new Date(t.starttime)-new Date(e.starttime)}));return i&&i[0]},oo=function(e,t){var n=e.local.public.customTracks;if(n&&n[t])return n[t].track};function ao(e,t){for(var n=t.getState(),r=0,i=["cam","screen"];r<i.length;r++)for(var s=i[r],o=0,a=["video","audio"];o<a.length;o++){var c=a[o],l="cam"===s?c:"screen".concat(c.charAt(0).toUpperCase()+c.slice(1)),u=e.tracks[l];if(u){var d=e.local?no(n,s,c):ro(n,e.session_id,s,c);"playable"===u.state&&(u.track=d),u.persistentTrack=d}}}function co(e,t){try{var n=t.getState();for(var r in e.tracks)if(!lo(r)){var i=e.tracks[r].kind;if(i){var s=e.tracks[r];if(s){var o=e.local?oo(n,r):ro(n,e.session_id,r,i);"playable"===s.state&&(e.tracks[r].track=o),s.persistentTrack=o}}}}catch(a){}}function lo(e){return["video","audio","screenVideo","screenAudio"].includes(e)}function uo(e,t,n){var r=n.getState();if(e.local){if(e.audio)try{e.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],e.audioTrack||(e.audio=!1)}catch(u){}if(e.video)try{e.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],e.videoTrack||(e.video=!1)}catch(u){}if(e.screen)try{e.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],e.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(u){}}else{var i=!0;try{var s=r.participants[e.session_id];s&&s.public&&s.public.rtcType&&"peer-to-peer"===s.public.rtcType.impl&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(i=!1)}catch(u){}if(!i)return e.audio=!1,e.audioTrack=!1,e.video=!1,e.videoTrack=!1,e.screen=!1,void(e.screenTrack=!1);try{if(r.streams,e.audio&&to(r,e.session_id,"cam-audio")){var o=ro(r,e.session_id,"cam","audio");o&&(t&&t.audioTrack&&t.audioTrack.id===o.id?e.audioTrack=o:o.muted||(e.audioTrack=o)),e.audioTrack||(e.audio=!1)}if(e.video&&to(r,e.session_id,"cam-video")){var a=ro(r,e.session_id,"cam","video");a&&(t&&t.videoTrack&&t.videoTrack.id===a.id?e.videoTrack=a:a.muted||(e.videoTrack=a)),e.videoTrack||(e.video=!1)}if(e.screen&&to(r,e.session_id,"screen-audio")){var c=ro(r,e.session_id,"screen","audio");c&&(t&&t.screenAudioTrack&&t.screenAudioTrack.id===c.id?e.screenAudioTrack=c:c.muted||(e.screenAudioTrack=c))}if(e.screen&&to(r,e.session_id,"screen-video")){var l=ro(r,e.session_id,"screen","video");l&&(t&&t.screenVideoTrack&&t.screenVideoTrack.id===l.id?e.screenVideoTrack=l:l.muted||(e.screenVideoTrack=l))}e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(u){}}}function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var po=new Map,fo=null;function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vo=new Map,go=null;function yo(e){var t;_o()?(t=e,po.has(t)||(po.set(t,{}),navigator.mediaDevices.enumerateDevices().then((function(e){var n;po.has(t)&&(po.get(t).lastDevicesString=JSON.stringify(e),fo||(n=te((function*(){var e,t=yield navigator.mediaDevices.enumerateDevices(),n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ho(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(po.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value,i=JSON.stringify(t);i!==po.get(r).lastDevicesString&&(po.get(r).lastDevicesString=i,r(t))}}catch(s){n.e(s)}finally{n.f()}})),fo=function(){return n.apply(this,arguments)},navigator.mediaDevices.addEventListener("devicechange",fo)))})).catch((function(){})))):function(e){vo.has(e)||(vo.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(t){vo.has(e)&&(vo.get(e).lastDevicesString=JSON.stringify(t),go||(go=setInterval(te((function*(){var e,t=yield navigator.mediaDevices.enumerateDevices(),n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mo(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(vo.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value,i=JSON.stringify(t);i!==vo.get(r).lastDevicesString&&(vo.get(r).lastDevicesString=i,r(t))}}catch(s){n.e(s)}finally{n.f()}})),3e3)))})))}(e)}function _o(){return _s()||void 0!==navigator.mediaDevices.ondevicechange}var bo=new Set,Eo=["result"],wo=["preserveIframe"];function So(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?So(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):So(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function To(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mo={},Ao="video",Oo="voice",Do=_s()?{data:{}}:{data:{},topology:"none"},Po={present:0,hidden:0},Lo={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Io=Object.keys(Lo),No=["state","volume","simulcastEncodings"],jo={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},xo={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string"}},Ro={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Fo={customIntegrations:{validate:ia,help:"customIntegrations should be an object of type ".concat(JSON.stringify(Ro),".")},customTrayButtons:{validate:ra,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(xo))},url:{validate:function(e){return"string"==typeof e},help:"url should be a string"},baseUrl:{validate:function(e){return"string"==typeof e},help:"baseUrl should be a string"},token:{validate:function(e){return"string"==typeof e},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(e,t){try{return t.validateDailyConfig(e),!0}catch(n){}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(e){return sa(e,jo)},help:"reactNativeConfig should look like ".concat(JSON.stringify(jo),", all fields optional")},lang:{validate:function(e){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(e)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(e){try{return Ko(e),!0}catch(t){return!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(e,t){return e instanceof MediaStreamTrack&&(t._sharedTracks.videoDeviceId=e),t._preloadCache.videoDeviceId=e,!0}},audioSource:{validate:function(e,t){return e instanceof MediaStreamTrack&&(t._sharedTracks.audioDeviceId=e),t._preloadCache.audioDeviceId=e,!0}},subscribeToTracksAutomatically:{validate:function(e,t){return t._preloadCache.subscribeToTracksAutomatically=e,!0}},theme:{validate:function(e){var t=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(!t.includes(i))return!1;if(!e[i].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return!1}return!0};return"object"===G(e)&&("light"in e&&"dark"in e||"colors"in e)&&("light"in e&&"dark"in e?"colors"in e.light&&"colors"in e.dark&&n(e.light.colors)&&n(e.dark.colors):n(e.colors))},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(e){if("grid"in e){var t=e.grid;if("maxTilesPerPage"in t){if(!Number.isInteger(t.maxTilesPerPage))return!1;if(t.maxTilesPerPage>49)return!1}if("minTilesPerPage"in t){if(!Number.isInteger(t.minTilesPerPage))return!1;if(t.minTilesPerPage<1)return!1;if("maxTilesPerPage"in t&&t.minTilesPerPage>t.maxTilesPerPage)return!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(e){return Xo(e,{allowAllParticipantsKey:!1})},help:na({allowAllParticipantsKey:!1})},sendSettings:{validate:function(e,t){return!!function(e,t){try{return t.validateUpdateSendSettings(e),!0}catch(n){return!1}}(e,t)&&(t._preloadCache.sendSettings=e,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(e,t){var n;return!!Zo(e)&&(t._preloadCache.inputSettings||(t._preloadCache.inputSettings={}),ea(e,null===(n=t.properties)||void 0===n?void 0:n.dailyConfig),e.audio&&(t._preloadCache.inputSettings.audio=e.audio),e.video&&(t._preloadCache.inputSettings.video=e.video),!0)},help:ta()},layout:{validate:function(e){return"custom-v1"===e||"browser"===e||"none"===e},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Uo={styles:{validate:function(e){for(var t in e)if("cam"!==t&&"screen"!==t)return!1;if(e.cam)for(var n in e.cam)if("div"!==n&&"video"!==n)return!1;if(e.screen)for(var r in e.screen)if("div"!==r&&"video"!==r)return!1;return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(e,t){if(t._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(e)||!_s()&&"avatar"===e)return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var s in t)if("custom"===s){if(!n.includes(t[s])&&!e(t[s],!0))return!1}else{var o=!i&&!r.includes(s),a=!n.includes(t[s]);if(o||a)return!1}return!0}(e)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(_s()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(e){return!1===e},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=re(n[t],2),i=r[0],s=r[1];switch(i){case"hasPresence":if("boolean"!=typeof s)return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var o,a=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],c=To(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(!a.includes(l))return!1}}catch(f){c.e(f)}finally{c.f()}}else if("boolean"!=typeof s)return!1;(s instanceof Array||Array.isArray(s))&&(e.canSend=new Set(s));break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var u,d=["participants","streaming","transcription"],h=To(s);try{for(h.s();!(u=h.n()).done;){var p=u.value;if(!d.includes(p))return!1}}catch(f){h.e(f)}finally{h.f()}}else if("boolean"!=typeof s)return!1;(s instanceof Array||Array.isArray(s))&&(e.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var e=te((function*(e){return new Promise((function(t,n){var r=[];e.forEach((function(i){return Promise.resolve(i).then((function(e){t(e)})).catch((function(t){r.push(t),r.length===e.length&&n(r)}))}))}))}));return function(t){return e.apply(this,arguments)}}());var Bo=function(){Q(U,se);var e,t,n,r,i,s,o,a,c,l,u,d,h,p,f,m,v,g,y,_,b,E,w,S,k,T,C,M,A,O,D,P,L,I,N,j,x,R,F=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var i=X(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}(U);function U(e){var t,n,r,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Y(this,U),Z(z(n=F.call(this)),"startListeningForDeviceChanges",(function(){yo(n.handleDeviceChange)})),Z(z(n),"stopListeningForDeviceChanges",(function(){!function(e){var t;_o()?(t=e,po.has(t)&&(po.delete(t),0===po.size&&fo&&(navigator.mediaDevices.removeEventListener("devicechange",fo),fo=null))):function(e){vo.has(e)&&(vo.delete(e),0===vo.size&&go&&(clearInterval(go),go=null))}(e)}(n.handleDeviceChange)})),Z(z(n),"handleDeviceChange",(function(e){e=e.map((function(e){return JSON.parse(JSON.stringify(e))})),n.emitDailyJSEvent({action:"available-devices-updated",availableDevices:e})})),Z(z(n),"handleNativeAppStateChange",(i=te((function*(e){if("destroyed"!==e){var t="active"===e;n.disableReactNativeAutoDeviceManagement("video")||(t?n.camUnmutedBeforeLosingNativeActiveState&&n.setLocalVideo(!0):(n.camUnmutedBeforeLosingNativeActiveState=n.localVideo(),n.camUnmutedBeforeLosingNativeActiveState&&n.setLocalVideo(!1)))}else yield n.destroy()})),function(e){return i.apply(this,arguments)})),Z(z(n),"handleNativeAudioFocusChange",(function(e){n.disableReactNativeAutoDeviceManagement("audio")||(n._hasNativeAudioFocus=e,n.toggleParticipantAudioBasedOnNativeAudioFocus(),n._hasNativeAudioFocus?n.micUnmutedBeforeLosingNativeAudioFocus&&n.setLocalAudio(!0):(n.micUnmutedBeforeLosingNativeAudioFocus=n.localAudio(),n.setLocalAudio(!1)))})),Z(z(n),"handleNativeSystemScreenCaptureStop",(function(){n.stopScreenShare()})),n.strictMode=void 0===s.strictMode||s.strictMode,n.allowMultipleCallInstances=null!==(t=s.allowMultipleCallInstances)&&void 0!==t&&t,Object.keys(Mo).length&&(n._logDuplicateInstanceAttempt(),!n.allowMultipleCallInstances)&&n.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");if(window._daily||(window._daily={pendings:[],instances:{}}),n.callClientId=Re(),r=z(n),Mo[r.callClientId]=r,window._daily.instances[n.callClientId]={},n._sharedTracks={},window._daily.instances[n.callClientId].tracks=n._sharedTracks,s.dailyJsVersion=U.version(),n._iframe=e,n._callObjectMode="none"===s.layout&&!n._iframe,n._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},void 0!==s.showLocalVideo?n._callObjectMode||(n._showLocalVideo=!!s.showLocalVideo):n._showLocalVideo=!0,void 0!==s.showParticipantsBar?n._callObjectMode||(n._showParticipantsBar=!!s.showParticipantsBar):n._showParticipantsBar=!0,void 0!==s.customIntegrations?n._callObjectMode||(n._customIntegrations=s.customIntegrations):n._customIntegrations={},void 0!==s.customTrayButtons?n._callObjectMode||(n._customTrayButtons=s.customTrayButtons):n._customTrayButtons={},void 0!==s.activeSpeakerMode?n._callObjectMode||(n._activeSpeakerMode=!!s.activeSpeakerMode):n._activeSpeakerMode=!1,s.receiveSettings?n._callObjectMode&&(n._receiveSettings=s.receiveSettings):n._receiveSettings={},n.validateProperties(s),n.properties=ko({},s),n._preloadCache.inputSettings||(n._preloadCache.inputSettings={}),s.inputSettings&&s.inputSettings.audio&&(n._preloadCache.inputSettings.audio=s.inputSettings.audio),s.inputSettings&&s.inputSettings.video&&(n._preloadCache.inputSettings.video=s.inputSettings.video),n._callObjectLoader=n._callObjectMode?new zs(n.callClientId):null,n._callState=Wr,n._isPreparingToJoin=!1,n._accessState={access:ei},n._meetingSessionSummary={},n._finalSummaryOfPrevSession={},n._meetingSessionState=la(Do,n._callObjectMode),n._nativeInCallAudioMode=Ao,n._participants={},n._isScreenSharing=!1,n._participantCounts=Po,n._rmpPlayerState={},n._waitingParticipants={},n._network={threshold:"good",quality:100},n._activeSpeaker={},n._localAudioLevel=0,n._isLocalAudioLevelObserverRunning=!1,n._remoteParticipantsAudioLevel={},n._isRemoteParticipantsAudioLevelObserverRunning=!1,n._maxAppMessageSize=os,n._messageChannel=_s()?new Bs:new Fs,n._iframe&&(n._iframe.requestFullscreen?n._iframe.addEventListener("fullscreenchange",(function(){document.fullscreenElement===n._iframe?(n.emitDailyJSEvent({action:Hi}),n.sendMessageToCallMachine({action:Hi})):(n.emitDailyJSEvent({action:Qi}),n.sendMessageToCallMachine({action:Qi}))})):n._iframe.webkitRequestFullscreen&&n._iframe.addEventListener("webkitfullscreenchange",(function(){document.webkitFullscreenElement===n._iframe?(n.emitDailyJSEvent({action:Hi}),n.sendMessageToCallMachine({action:Hi})):(n.emitDailyJSEvent({action:Qi}),n.sendMessageToCallMachine({action:Qi}))}))),_s()){var o=n.nativeUtils();o.addAudioFocusChangeListener&&o.removeAudioFocusChangeListener&&o.addAppStateChangeListener&&o.removeAppStateChangeListener&&o.addSystemScreenCaptureStopListener&&o.removeSystemScreenCaptureStopListener,n._hasNativeAudioFocus=!0,o.addAudioFocusChangeListener(n.handleNativeAudioFocusChange),o.addAppStateChangeListener(n.handleNativeAppStateChange),o.addSystemScreenCaptureStopListener(n.handleNativeSystemScreenCaptureStop)}return n._callObjectMode&&n.startListeningForDeviceChanges(),n._messageChannel.addListenerForMessagesFromCallMachine(n.handleMessageFromCallMachine,n.callClientId,z(n)),n}return W(U,[{key:"destroy",value:(R=te((function*(){var e,t;try{yield this.leave()}catch(s){}var n=this._iframe;if(n){var r=n.parentElement;r&&r.removeChild(n)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),_s()){var i=this.nativeUtils();i.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),i.removeAppStateChangeListener(this.handleNativeAppStateChange),i.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete Mo[this.callClientId],(null===(e=window)||void 0===e||null===(t=e._daily)||void 0===t?void 0:t.instances)&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)})),function(){return R.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(e){var t=e.bodyClass,n=e.cssFile,r=e.cssText;return Ho(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(n),bodyClass:t,cssText:r}),this}},{key:"iframe",value:function(){return Ho(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return Wo(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return Wo(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(e,t){for(var n in t){if(!Uo[n])throw new Error("unrecognized updateParticipant property ".concat(n));if(Uo[n].validate&&!Uo[n].validate(t[n],this,this._participants[e]))throw new Error(Uo[n].help)}}},{key:"updateParticipant",value:function(e,t){return this._participants.local&&this._participants.local.session_id===e&&(e="local"),e&&t&&(this.validateParticipantProperties(e,t),this.sendMessageToCallMachine({action:"update-participant",id:e,properties:t})),this}},{key:"updateParticipants",value:function(e){var t=this._participants.local&&this._participants.local.session_id;for(var n in e)n===t&&(n="local"),n&&e[n]&&this.validateParticipantProperties(n,e[n]);return this.sendMessageToCallMachine({action:"update-participants",participants:e}),this}},{key:"updateWaitingParticipant",value:(x=te((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Wo(this._callObjectMode,"updateWaitingParticipant()"),Vo(this._callState,"updateWaitingParticipant()"),"string"!=typeof t||"object"!==G(n))throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise((function(r,i){e.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:t,updates:n},(function(e){e.error&&i(e.error),e.id||i(new Error("unknown error in updateWaitingParticipant()")),r({id:e.id})}))}))})),function(){return x.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(j=te((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Wo(this._callObjectMode,"updateWaitingParticipants()"),Vo(this._callState,"updateWaitingParticipants()"),"object"!==G(t))throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise((function(n,r){e.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:t},(function(e){e.error&&r(e.error),e.ids||r(new Error("unknown error in updateWaitingParticipants()")),n({ids:e.ids})}))}))})),function(){return j.apply(this,arguments)})},{key:"requestAccess",value:(N=te((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.access,r=void 0===n?{level:ti}:n,i=t.name,s=void 0===i?"":i;return Wo(this._callObjectMode,"requestAccess()"),Vo(this._callState,"requestAccess()"),new Promise((function(t,n){e.sendMessageToCallMachine({action:"daily-method-request-access",access:r,name:s},(function(e){e.error&&n(e.error),e.access||n(new Error("unknown error in requestAccess()")),t({access:e.access,granted:e.granted})}))}))})),function(){return N.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"forceDiscardTrack"in t&&(_s()||e)&&(t={}),this.sendMessageToCallMachine({action:"local-audio",state:e,options:t}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(e){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:e}),this}},{key:"setLocalVideo",value:function(e){return this.sendMessageToCallMachine({action:"local-video",state:e}),this}},{key:"getReceiveSettings",value:(I=te((function*(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).showInheritedValues,r=void 0!==n&&n;if(Wo(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(G(e)){case"string":return new Promise((function(n){t.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:e,showInheritedValues:r},(function(e){n(e.receiveSettings)}))}));case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}})),function(e){return I.apply(this,arguments)})},{key:"updateReceiveSettings",value:(L=te((function*(e){var t=this;if(Wo(this._callObjectMode,"updateReceiveSettings()"),!Xo(e,{allowAllParticipantsKey:!0}))throw new Error(na({allowAllParticipantsKey:!0}));return Vo(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise((function(n){t.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:e},(function(e){n({receiveSettings:e.receiveSettings})}))}))})),function(e){return L.apply(this,arguments)})},{key:"_prepInputSettingsToPresentToUser",value:function(e){var t,n,r,i,s,o,a,c;if(e){var l={},u="none"===(null===(t=e.audio)||void 0===t||null===(n=t.processor)||void 0===n?void 0:n.type)&&(null===(r=e.audio)||void 0===r||null===(i=r.processor)||void 0===i?void 0:i._isDefaultWhenNone);if(e.audio&&!u){var d=ko({},e.audio.processor);delete d._isDefaultWhenNone,l.audio=ko(ko({},e.audio),{},{processor:d})}var h="none"===(null===(s=e.video)||void 0===s||null===(o=s.processor)||void 0===o?void 0:o.type)&&(null===(a=e.video)||void 0===a||null===(c=a.processor)||void 0===c?void 0:c._isDefaultWhenNone);if(e.video&&!h){var p=ko({},e.video.processor);delete p._isDefaultWhenNone,l.video=ko(ko({},e.video),{},{processor:p})}return l}}},{key:"getInputSettings",value:function(){var e=this;return Ho(),new Promise((function(t){t(e._getInputSettings())}))}},{key:"_getInputSettings",value:function(){var e,t,n,r,i,s,o,a,c={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(e=(null===(n=this._inputSettings)||void 0===n?void 0:n.video)||c,t=(null===(r=this._inputSettings)||void 0===r?void 0:r.audio)||c):(e=(null===(i=this._preloadCache)||void 0===i||null===(s=i.inputSettings)||void 0===s?void 0:s.video)||c,t=(null===(o=this._preloadCache)||void 0===o||null===(a=o.inputSettings)||void 0===a?void 0:a.audio)||c);var l={audio:t,video:e};return this._prepInputSettingsToPresentToUser(l)}},{key:"updateInputSettings",value:(P=te((function*(e){var t=this;return Ho(),Zo(e)?(e&&(this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),ea(e,this.properties.dailyConfig),e.audio&&(this._preloadCache.inputSettings.audio=e.audio),e.video&&(this._preloadCache.inputSettings.video=e.video)),e.video||e.audio?this._callObjectMode&&!this._callMachineInitialized?this._getInputSettings():new Promise((function(n,r){t.sendMessageToCallMachine({action:"update-input-settings",inputSettings:e},(function(e){e.error?r(e.error):n({inputSettings:t._prepInputSettingsToPresentToUser(e.inputSettings)})}))})):this._getInputSettings()):Promise.reject(ta())})),function(e){return P.apply(this,arguments)})},{key:"setBandwidth",value:function(e){var t=e.kbs,n=e.trackConstraints;if(Ho(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:t,trackConstraints:n}),this}},{key:"getDailyLang",value:function(){var e=this;if(Ho(),this._callMachineInitialized)return new Promise((function(t){e.sendMessageToCallMachine({action:"get-daily-lang"},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))}},{key:"setDailyLang",value:function(e){return Ho(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:e}),this}},{key:"setProxyUrl",value:function(e){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:e}),this}},{key:"setIceConfig",value:function(e){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:e}),this}},{key:"meetingSessionSummary",value:function(){return[Xr,Zr].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(D=te((function*(){var e=this;return Vo(this._callState,"getMeetingSession()"),new Promise((function(t){e.sendMessageToCallMachine({action:"get-meeting-session"},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))})),function(){return D.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return Vo(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";Wo(this._callObjectMode,"setMeetingSessionData()"),Vo(this._callState,"setMeetingSessionData");try{new Gs({data:t=e,mergeStrategy:n})}catch(t){throw t}try{this.sendMessageToCallMachine({action:"set-session-data",data:e,mergeStrategy:n})}catch(t){throw new Error("Error setting meeting session data: ".concat(t))}}},{key:"setUserName",value:function(e,t){var n=this;return this.properties.userName=e,new Promise((function(r){n.sendMessageToCallMachine({action:"set-user-name",name:null!=e?e:"",thisMeetingOnly:_s()||!!t&&!!t.thisMeetingOnly},(function(e){delete e.action,delete e.callbackStamp,r(e)}))}))}},{key:"setUserData",value:(O=te((function*(e){var t=this;try{Ko(e)}catch(n){throw n}if(this.properties.userData=e,this._callMachineInitialized)return new Promise((function(r){try{t.sendMessageToCallMachine({action:"set-user-data",userData:e},(function(e){delete e.action,delete e.callbackStamp,r(e)}))}catch(n){throw new Error("Error setting user data: ".concat(n))}}))})),function(e){return O.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(e){if(e&&(e<100||"number"!=typeof e))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(e){var t=this;if("undefined"==typeof AudioWorkletNode&&!_s())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(e),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise((function(n,r){t.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:e},(function(e){t._isLocalAudioLevelObserverRunning=!e.error,e.error?r({error:e.error}):n()}))}));this._preloadCache.localAudioLevelObserver={enabled:!0,interval:e}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(e){var t=this;if(this.validateAudioLevelInterval(e),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise((function(n,r){t.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:e},(function(e){t._isRemoteParticipantsAudioLevelObserverRunning=!e.error,e.error?r({error:e.error}):n()}))}));this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:e}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(A=te((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Wo(this._callObjectMode,"startCamera()"),Go(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(t)}catch(n){return Promise.reject(n)}else{if(this._didPreAuth){if(t.url&&t.url!==this.properties.url)return Promise.reject();if(t.token&&t.token!==this.properties.token)return Promise.reject()}this.validateProperties(t),this.properties=ko(ko({},this.properties),t)}return new Promise((function(t){e.sendMessageToCallMachine({action:"start-camera",properties:qo(e.properties,e.callClientId),preloadCache:qo(e._preloadCache,e.callClientId)},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))})),function(){return A.apply(this,arguments)})},{key:"validateCustomTrack",value:function(e,t,n){if(n&&n.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(t&&"music"!==t&&"speech"!==t&&!(t instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(n&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(n))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(e instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{track:track,mode:mode,trackName:trackName};return Ho(),Vo(this._callState,"startCustomTrack()"),this.validateCustomTrack(t.track,t.mode,t.trackName),new Promise((function(n,r){e._sharedTracks.customTrack=t.track,t.track=hs,e.sendMessageToCallMachine({action:"start-custom-track",properties:t},(function(e){e.error?r({error:e.error}):n(e.mediaTag)}))}))}},{key:"stopCustomTrack",value:function(e){var t=this;return Ho(),Vo(this._callState,"stopCustomTrack()"),new Promise((function(n){t.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:e},(function(e){n(e.mediaTag)}))}))}},{key:"setCamera",value:function(e){var t=this;return Qo(),$o(this._callMachineInitialized,"setCamera()"),new Promise((function(n){t.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:e},(function(e){n({device:e.device})}))}))}},{key:"setAudioDevice",value:(M=te((function*(e){return Qo(),this.nativeUtils().setAudioDevice(e),{deviceId:yield this.nativeUtils().getAudioDevice()}})),function(e){return M.apply(this,arguments)})},{key:"cycleCamera",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){e.sendMessageToCallMachine({action:"cycle-camera",properties:t},(function(e){n({device:e.device})}))}))}},{key:"cycleMic",value:function(){var e=this;return Ho(),new Promise((function(t){e.sendMessageToCallMachine({action:"cycle-mic"},(function(e){t({device:e.device})}))}))}},{key:"getCameraFacingMode",value:function(){var e=this;return Qo(),new Promise((function(t){e.sendMessageToCallMachine({action:"get-camera-facing-mode"},(function(e){t(e.facingMode)}))}))}},{key:"setInputDevicesAsync",value:(C=te((function*(e){var t=this,n=e.audioDeviceId,r=e.videoDeviceId,i=e.audioSource,s=e.videoSource;return Ho(),void 0!==i&&(n=i),void 0!==s&&(r=s),n&&(this._preloadCache.audioDeviceId=n,this._sharedTracks.audioDeviceId=n),r&&(this._preloadCache.videoDeviceId=r,this._sharedTracks.videoDeviceId=r),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(n instanceof MediaStreamTrack&&(n=hs),r instanceof MediaStreamTrack&&(r=hs),new Promise((function(e){t.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:n,videoDeviceId:r},(function(n){delete n.action,delete n.callbackStamp,n.returnPreloadCache?e({camera:{deviceId:t._preloadCache.videoDeviceId},mic:{deviceId:t._preloadCache.audioDeviceId},speaker:{deviceId:t._preloadCache.outputDeviceId}}):e(n)}))})))})),function(e){return C.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(T=te((function*(e){var t=this,n=e.outputDeviceId;return Ho(),n&&(this._preloadCache.outputDeviceId=n),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise((function(e){t.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:n},(function(n){delete n.action,delete n.callbackStamp,n.returnPreloadCache?e({camera:{deviceId:t._preloadCache.videoDeviceId},mic:{deviceId:t._preloadCache.audioDeviceId},speaker:{deviceId:t._preloadCache.outputDeviceId}}):e(n)}))}))})),function(e){return T.apply(this,arguments)})},{key:"getInputDevices",value:(k=te((function*(){var e=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise((function(t){e.sendMessageToCallMachine({action:"get-input-devices"},(function(n){delete n.action,delete n.callbackStamp,n.returnPreloadCache?t({camera:{deviceId:e._preloadCache.videoDeviceId},mic:{deviceId:e._preloadCache.audioDeviceId},speaker:{deviceId:e._preloadCache.outputDeviceId}}):t(n)}))}))})),function(){return k.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return Qo(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(e){if(Qo(),[Ao,Oo].includes(e)&&e!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=e,!this.disableReactNativeAutoDeviceManagement("audio")&&Yo(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}},{key:"preAuth",value:(S=te((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Wo(this._callObjectMode,"preAuth()"),Go(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(t)),!t.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(t),this.properties=ko(ko({},this.properties),t),new Promise((function(t,n){e.sendMessageToCallMachine({action:"daily-method-preauth",properties:qo(e.properties,e.callClientId),preloadCache:qo(e._preloadCache,e.callClientId)},(function(r){return r.error?n(r.error):r.access?(e._didPreAuth=!0,void t({access:r.access})):n(new Error("unknown error in preAuth()"))}))}))})),function(){return S.apply(this,arguments)})},{key:"load",value:(w=te((function*(e){var t=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(e&&(this.validateProperties(e),this.properties=ko(ko({},this.properties),e)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(zr),this.emitDailyJSEvent({action:oi}),this._callObjectMode?new Promise((function(e,n){t._callObjectLoader.cancel();var r=Date.now();t._callObjectLoader.load(t.properties.dailyConfig,(function(n){t._bundleLoadTime=n?"no-op":Date.now()-r,t._updateCallState(Hr),n&&t.emitDailyJSEvent({action:ci}),e()}),(function(e,r){if(t.emitDailyJSEvent({action:ai}),!r){t._updateCallState(Zr),t.resetMeetingDependentVars();var i={action:ss,errorMsg:e.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:e,bundleUrl:Be(t.properties.dailyConfig)}}};t._maybeSendToSentry(i),t.emitDailyJSEvent(i),n(e.msg)}}))})):(this._iframe.src=Ue(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise((function(e,n){t._loadedCallback=function(r){t._callState!==Zr?(t._updateCallState(Hr),(t.properties.cssFile||t.properties.cssText)&&t.loadCss(t.properties),e()):n(r)}})))}})),function(e){return w.apply(this,arguments)})},{key:"join",value:(E=te((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var n=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(t)}catch(r){return this.updateIsPreparingToJoin(!1),Promise.reject(r)}}else{if(n=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(t.url&&t.url!==this.properties.url)return this.updateIsPreparingToJoin(!1),Promise.reject();if(t.token&&t.token!==this.properties.token)return this.updateIsPreparingToJoin(!1),Promise.reject()}if(t.url&&!this._callObjectMode&&t.url&&t.url!==this.properties.url)return this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(t),this.properties=ko(ko({},this.properties),t)}return void 0!==t.showLocalVideo&&(this._callObjectMode||(this._showLocalVideo=!!t.showLocalVideo)),void 0!==t.showParticipantsBar&&(this._callObjectMode||(this._showParticipantsBar=!!t.showParticipantsBar)),this._callState===Kr||this._callState===Qr?void this.updateIsPreparingToJoin(!1):(this._updateCallState(Qr,!1),this.emitDailyJSEvent({action:di}),this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),t.inputSettings&&t.inputSettings.audio&&(this._preloadCache.inputSettings.audio=t.inputSettings.audio),t.inputSettings&&t.inputSettings.video&&(this._preloadCache.inputSettings.video=t.inputSettings.video),this.sendMessageToCallMachine({action:"join-meeting",properties:qo(this.properties,this.callClientId),preloadCache:qo(this._preloadCache,this.callClientId)}),new Promise((function(t,r){e._joinedCallback=function(i,s){if(e._callState!==Zr){if(e._updateCallState(Kr),i)for(var o in i){if(e._callObjectMode){var a=e._callMachine().store;ao(i[o],a),co(i[o],a),uo(i[o],e._participants[o],a)}e._participants[o]=ko({},i[o]),e.toggleParticipantAudioBasedOnNativeAudioFocus()}n&&e.loadCss(e.properties),t(i)}else r(s)}})))})),function(){return E.apply(this,arguments)})},{key:"leave",value:(b=te((function*(){var e=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise((function(t){e._callState===Xr||e._callState===Zr?t():e._callObjectLoader&&!e._callObjectLoader.loaded?(e._callObjectLoader.cancel(),e._updateCallState(Xr),e.resetMeetingDependentVars(),e.emitDailyJSEvent({action:Xr}),t()):(e._resolveLeave=t,e.sendMessageToCallMachine({action:"leave-meeting"}))}))})),function(){return b.apply(this,arguments)})},{key:"startScreenShare",value:(_=te((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if($o(this._callMachineInitialized,"startScreenShare()"),t.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",t.screenVideoSendSettings),t.mediaStream&&(this._sharedTracks.screenMediaStream=t.mediaStream,t.mediaStream=hs),"undefined"!=typeof DailyNativeUtils&&void 0!==DailyNativeUtils.isIOS&&DailyNativeUtils.isIOS){var n=this.nativeUtils();if(yield n.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:is,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});n.setSystemScreenCaptureStartCallback((function(){n.setSystemScreenCaptureStartCallback(null),e.sendMessageToCallMachine({action:ls,captureOptions:t})})),n.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:ls,captureOptions:t})})),function(){return _.apply(this,arguments)})},{key:"stopScreenShare",value:function(){$o(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(ko({action:"local-recording-start"},e))}},{key:"updateRecording",value:function(e){var t=e.layout,n=void 0===t?{preset:"default"}:t,r=e.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:n,instanceId:r})}},{key:"stopRecording",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(ko({action:"local-recording-stop"},e))}},{key:"startLiveStreaming",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(ko({action:"daily-method-start-live-streaming"},e))}},{key:"updateLiveStreaming",value:function(e){var t=e.layout,n=void 0===t?{preset:"default"}:t,r=e.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:n,instanceId:r})}},{key:"addLiveStreamingEndpoints",value:function(e){var t=e.endpoints,n=e.instanceId;this.sendMessageToCallMachine({action:us,endpointsOp:"add-endpoints",endpoints:t,instanceId:n})}},{key:"removeLiveStreamingEndpoints",value:function(e){var t=e.endpoints,n=e.instanceId;this.sendMessageToCallMachine({action:us,endpointsOp:"remove-endpoints",endpoints:t,instanceId:n})}},{key:"stopLiveStreaming",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(ko({action:"daily-method-stop-live-streaming"},e))}},{key:"validateDailyConfig",value:function(e){e.camSimulcastEncodings&&this.validateSimulcastEncodings(e.camSimulcastEncodings),e.screenSimulcastEncodings,Cs()&&e.noAutoDefaultDeviceChange}},{key:"validateSimulcastEncodings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if(!(e instanceof Array||Array.isArray(e)))throw new Error("encodings must be an Array");if(!ca(e.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var r=0;r<e.length;r++){var i=e[r];for(var s in this._validateEncodingLayerHasValidProperties(i),i)if(Io.includes(s)){if("number"!=typeof i[s])throw new Error("".concat(s," must be a number"));if(t){var o=t[s],a=o.min,c=o.max;if(!ca(i[s],a,c))throw new Error("".concat(s," value not in range. valid range: ").concat(a," to ").concat(c))}}else if(!["active","scalabilityMode"].includes(s))throw new Error("Invalid key ".concat(s,", valid keys are:")+Object.values(Io));if(n&&!i.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(y=te((function*(e){var t=this,n=e.url,r=e.settings,i=void 0===r?{state:ms.PLAY}:r;try{!function(e){if("string"!=typeof e)throw new Error('url parameter must be "string" type')}(n),aa(i),function(e){for(var t in e)if(!No.includes(t))throw new Error("Invalid key ".concat(t,", valid keys are: ").concat(No));e.simulcastEncodings&&this.validateSimulcastEncodings(e.simulcastEncodings,Lo,!0)}(i)}catch(s){throw s}return new Promise((function(e,r){t.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:n,settings:i},(function(t){t.error?r({error:t.error,errorMsg:t.errorMsg}):e({session_id:t.session_id,remoteMediaPlayerState:{state:t.state,settings:t.settings}})}))}))})),function(e){return y.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(g=te((function*(e){var t=this;if("string"!=typeof e)throw new Error(" remotePlayerID must be of type string");return new Promise((function(n,r){t.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:e},(function(e){e.error?r({error:e.error,errorMsg:e.errorMsg}):n()}))}))})),function(e){return g.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(v=te((function*(e){var t=this,n=e.session_id,r=e.settings;try{aa(r)}catch(i){throw i}return new Promise((function(e,i){t.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:n,settings:r},(function(t){t.error?i({error:t.error,errorMsg:t.errorMsg}):e({session_id:t.session_id,remoteMediaPlayerState:{state:t.state,settings:t.settings}})}))}))})),function(e){return v.apply(this,arguments)})},{key:"startTranscription",value:function(e){Vo(this._callState,"startTranscription()"),this.sendMessageToCallMachine(ko({action:"daily-method-start-transcription"},e))}},{key:"updateTranscription",value:function(e){if(Vo(this._callState,"updateTranscription()"),!e)throw new Error("updateTranscription Error: options is mandatory");if("object"!==G(e))throw new Error("updateTranscription Error: options must be object type");if(e.participants&&!Array.isArray(e.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(ko({action:"daily-method-update-transcription"},e))}},{key:"stopTranscription",value:function(e){if(Vo(this._callState,"stopTranscription()"),e&&"object"!==G(e))throw new Error("stopTranscription Error: options must be object type");if(e&&!e.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(ko({action:"daily-method-stop-transcription"},e))}},{key:"startDialOut",value:(m=te((function*(e){var t=this;Vo(this._callState,"startDialOut()");var n=function(e){if(e){if(!Array.isArray(e))throw new Error("Error starting dial out: audio codec must be an array");if(e.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");e.forEach((function(e){if("string"!=typeof e)throw new Error("Error starting dial out: audio codec must be a string");if("OPUS"!==e&&"PCMU"!==e&&"PCMA"!==e&&"G722"!==e)throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")}))}};if(!e.sipUri&&!e.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(e.sipUri&&e.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(e.sipUri){if("string"!=typeof e.sipUri)throw new Error("Error starting dial out: sipUri must be a string");if(!e.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(e.video&&"boolean"!=typeof e.video)throw new Error("Error starting dial out: video must be a boolean value");!function(e){if(e&&(n(e.audio),e.video)){if(!Array.isArray(e.video))throw new Error("Error starting dial out: video codec must be an array");if(e.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");e.video.forEach((function(e){if("string"!=typeof e)throw new Error("Error starting dial out: video codec must be a string");if("H264"!==e&&"VP8"!==e)throw new Error("Error starting dial out: video codec must be H264 or VP8")}))}}(e.codecs)}if(e.phoneNumber){if("string"!=typeof e.phoneNumber)throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(e.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");e.codecs&&n(e.codecs.audio)}if(e.callerId){if("string"!=typeof e.callerId)throw new Error("Error starting dial out: callerId must be a string");if(e.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(e.displayName){if("string"!=typeof e.displayName)throw new Error("Error starting dial out: displayName must be a string");if(e.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(e.userId){if("string"!=typeof e.userId)throw new Error("Error starting dial out: userId must be a string");if(e.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}return new Promise((function(n,r){t.sendMessageToCallMachine(ko({action:"dialout-start"},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return m.apply(this,arguments)})},{key:"stopDialOut",value:function(e){var t=this;return Vo(this._callState,"stopDialOut()"),new Promise((function(n,r){t.sendMessageToCallMachine(ko({action:"dialout-stop"},e),(function(e){e.error?r(e.error):n(e)}))}))}},{key:"sipCallTransfer",value:(f=te((function*(e){var t=this;if(Vo(this._callState,"sipCallTransfer()"),!e)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return e.useSipRefer=!1,oa(e,"sipCallTransfer"),new Promise((function(n,r){t.sendMessageToCallMachine(ko({action:gs},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return f.apply(this,arguments)})},{key:"sipRefer",value:(p=te((function*(e){var t=this;if(Vo(this._callState,"sipRefer()"),!e)throw new Error("sessionId and toEndPoint are mandatory parameter");return e.useSipRefer=!0,oa(e,"sipRefer"),new Promise((function(n,r){t.sendMessageToCallMachine(ko({action:gs},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return p.apply(this,arguments)})},{key:"sendDTMF",value:(h=te((function*(e){var t=this;return Vo(this._callState,"sendDTMF()"),function(e){var t=e.sessionId,n=e.tones;if(!t||!n)throw new Error("sessionId and tones are mandatory parameter");if("string"!=typeof t||"string"!=typeof n)throw new Error("sessionId and tones should be of string type");if(n.length>20)throw new Error("tones string must be upto 20 characters");var r=n.match(/[^0-9A-D*#]/g);if(r&&r[0])throw new Error("".concat(r[0]," is not valid DTMF tone"))}(e),new Promise((function(n,r){t.sendMessageToCallMachine(ko({action:"send-dtmf"},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return h.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var e=this;return this._callState!==Kr?{stats:{latest:{}}}:new Promise((function(t){e.sendMessageToCallMachine({action:"get-calc-stats"},(function(n){t(ko({stats:n.stats},e._network))}))}))}},{key:"testWebsocketConnectivity",value:(d=te((function*(){var e=this;if(Jo(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(t){return Promise.reject(t)}return new Promise((function(t,n){e.sendMessageToCallMachine({action:"test-websocket-connectivity"},(function(e){e.error?n(e.error):t(e.results)}))}))})),function(){return d.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(e){return e&&e instanceof MediaStreamTrack&&!!function(e){return e&&"live"===e.readyState&&!((t=e).muted&&!bo.has(t.id));var t}(e)||!1}},{key:"testCallQuality",value:(u=te((function*(){var e=this;Ho(),Wo(this._callObjectMode,"testCallQuality()"),$o(this._callMachineInitialized,"testCallQuality()",null,!0),Go(this._callState,this._isPreparingToJoin,"testCallQuality()");var t=this._testCallAlreadyInProgress,n=function(n){t||(e._testCallInProgress=n)};if(n(!0),this.needsLoad())try{var r=this._callState;yield this.load(),this._callState=r}catch(an){return n(!1),Promise.reject(an)}return new Promise((function(t){e.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:e.properties.dailyJsVersion},(function(r){var i=r.results,s=i.result,o=V(i,Eo);if("failed"===s){var a,c=ko({},o);null!==(a=o.error)&&void 0!==a&&a.details?(o.error.details=JSON.parse(o.error.details),c.error=ko(ko({},c.error),{},{details:ko({},c.error.details)}),c.error.details.duringTest="testCallQuality"):(c.error=c.error?ko({},c.error):{},c.error.details={duringTest:"testCallQuality"}),e._maybeSendToSentry(c)}n(!1),t(ko({result:s},o))}))}))})),function(){return u.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(l=te((function*(e){var t,n={result:(t=_s()?yield this.testPeerToPeerCallQuality(e):yield this.testCallQuality()).result,secondsElapsed:t.secondsElapsed};return t.data&&(n.data={maxRTT:t.data.maxRoundTripTime,packetLoss:t.data.avgRecvPacketLoss}),n})),function(e){return l.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(c=te((function*(e){var t=this;if(Jo(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(i){return Promise.reject(i)}var n=e.videoTrack,r=e.duration;if(!this._validateVideoTrackForNetworkTests(n))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=n,new Promise((function(e,n){t.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:r},(function(t){t.error?n(t.error):e(t.results)}))}))})),function(e){return c.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){_s()?this.stopTestPeerToPeerCallQuality():this.stopTestCallQuality()}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(a=te((function*(e){var t=this;if(Jo(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(n){return Promise.reject(n)}if(!this._validateVideoTrackForNetworkTests(e))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=e,new Promise((function(e,n){t.sendMessageToCallMachine({action:"test-network-connectivity"},(function(t){t.error?n(t.error):e(t.results)}))}))})),function(e){return a.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var e=this;return new Promise((function(t){e._callState===Kr?e.sendMessageToCallMachine({action:"get-cpu-load-stats"},(function(e){t(e.cpuStats)})):t({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})}))}},{key:"_validateEncodingLayerHasValidProperties",value:function(e){var t;if(!((null===(t=Object.keys(e))||void 0===t?void 0:t.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(Io))}},{key:"_validateVideoSendSettings",value:function(e,t){var n="screenVideo"===e?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],r="Video send settings should be either an object or one of the supported presets: ".concat(n.join());if("string"==typeof t){if(!n.includes(t))throw new Error(r)}else{if("object"!==G(t))throw new Error(r);if(!t.maxQuality&&!t.encodings&&void 0===t.allowAdaptiveLayers)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(t.maxQuality&&-1===["low","medium","high"].indexOf(t.maxQuality))throw new Error("maxQuality must be either low, medium or high");if(t.encodings){var i=!1;switch(Object.keys(t.encodings).length){case 1:i=!t.encodings.low;break;case 2:i=!t.encodings.low||!t.encodings.medium;break;case 3:i=!t.encodings.low||!t.encodings.medium||!t.encodings.high;break;default:i=!0}if(i)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");t.encodings.low&&this._validateEncodingLayerHasValidProperties(t.encodings.low),t.encodings.medium&&this._validateEncodingLayerHasValidProperties(t.encodings.medium),t.encodings.high&&this._validateEncodingLayerHasValidProperties(t.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(e){var t=this;if(!e||0===Object.keys(e).length)throw new Error("Send settings must contain at least information for one track!");Object.entries(e).forEach((function(e){var n=re(e,2),r=n[0],i=n[1];t._validateVideoSendSettings(r,i)}))}},{key:"updateSendSettings",value:function(e){var t=this;return this.validateUpdateSendSettings(e),this.needsLoad()?(this._preloadCache.sendSettings=e,{sendSettings:this._preloadCache.sendSettings}):new Promise((function(n,r){t.sendMessageToCallMachine({action:"update-send-settings",sendSettings:e},(function(e){e.error?r(e.error):n(e.sendSettings)}))}))}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return Ho(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(e){return Ho(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:e}),this}},{key:"activeSpeakerMode",value:function(){return Ho(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(e){return Vo(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=e,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:e}),this}},{key:"enumerateDevices",value:(o=te((function*(){var e=this;if(this._callObjectMode){var t=yield navigator.mediaDevices.enumerateDevices();return"Firefox"===As()&&Os().major>115&&Os().major<123&&(t=t.filter((function(e){return"audiooutput"!==e.kind}))),{devices:t.map((function(e){var t=JSON.parse(JSON.stringify(e));if(!_s()&&"videoinput"===e.kind&&e.getCapabilities){var n,r=e.getCapabilities();t.facing=(null==r||null===(n=r.facingMode)||void 0===n?void 0:n.length)>=1?r.facingMode[0]:void 0}return t}))}}return new Promise((function(t){e.sendMessageToCallMachine({action:"enumerate-devices"},(function(e){t({devices:e.devices})}))}))})),function(){return o.apply(this,arguments)})},{key:"sendAppMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";if(Vo(this._callState,"sendAppMessage()"),JSON.stringify(e).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:e,to:t}),this}},{key:"addFakeParticipant",value:function(e){return Ho(),Vo(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(ko({action:"add-fake-participant"},e)),this}},{key:"setShowNamesMode",value:function(e){return zo(this._callObjectMode,"setShowNamesMode()"),Ho(),e&&"always"!==e&&"never"!==e||this.sendMessageToCallMachine({action:"set-show-names",mode:e}),this}},{key:"setShowLocalVideo",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return zo(this._callObjectMode,"setShowLocalVideo()"),Ho(),Vo(this._callState,"setShowLocalVideo()"),"boolean"!=typeof e||(this.sendMessageToCallMachine({action:"set-show-local-video",show:e}),this._showLocalVideo=e),this}},{key:"showLocalVideo",value:function(){return zo(this._callObjectMode,"showLocalVideo()"),Ho(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return zo(this._callObjectMode,"setShowParticipantsBar()"),Ho(),Vo(this._callState,"setShowParticipantsBar()"),"boolean"!=typeof e||(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:e}),this._showParticipantsBar=e),this}},{key:"showParticipantsBar",value:function(){return zo(this._callObjectMode,"showParticipantsBar()"),Ho(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return Ho(),zo(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(e){return Ho(),zo(this._callObjectMode,"setCustomIntegrations()"),Vo(this._callState,"setCustomIntegrations()"),ia(e)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:e}),this._customIntegrations=e,this):this}},{key:"startCustomIntegrations",value:function(e){var t=this;if(Ho(),zo(this._callObjectMode,"startCustomIntegrations()"),Vo(this._callState,"startCustomIntegrations()"),Array.isArray(e)&&e.some((function(e){return"string"!=typeof e}))||!Array.isArray(e)&&"string"!=typeof e)return this;var n="string"==typeof e?[e]:e;return n.filter((function(e){return!(e in t._customIntegrations)})).length||this.sendMessageToCallMachine({action:"start-custom-integrations",ids:n}),this}},{key:"stopCustomIntegrations",value:function(e){var t=this;if(Ho(),zo(this._callObjectMode,"stopCustomIntegrations()"),Vo(this._callState,"stopCustomIntegrations()"),Array.isArray(e)&&e.some((function(e){return"string"!=typeof e}))||!Array.isArray(e)&&"string"!=typeof e)return this;var n="string"==typeof e?[e]:e;return n.filter((function(e){return!(e in t._customIntegrations)})).length||this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:n}),this}},{key:"customTrayButtons",value:function(){return zo(this._callObjectMode,"customTrayButtons()"),Ho(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(e){return zo(this._callObjectMode,"updateCustomTrayButtons()"),Ho(),Vo(this._callState,"updateCustomTrayButtons()"),ra(e)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:e}),this._customTrayButtons=e,this):this}},{key:"theme",value:function(){return zo(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(e){var t=this;return zo(this._callObjectMode,"setTheme()"),new Promise((function(n,r){try{t.validateProperties({theme:e}),t.properties.theme=ko({},e),t.sendMessageToCallMachine({action:"set-theme",theme:t.properties.theme});try{t.emitDailyJSEvent({action:si,theme:t.properties.theme})}catch(i){}n(t.properties.theme)}catch(i){r(i)}}))}},{key:"requestFullscreen",value:(s=te((function*(){if(Ho(),this._iframe&&!document.fullscreenElement&&Es())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(an){}})),function(){return s.apply(this,arguments)})},{key:"exitFullscreen",value:function(){Ho(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(i=te((function*(){var e=this;return this._callObjectMode?Promise.resolve(null):new Promise((function(t){e.sendMessageToCallMachine({action:"get-sidebar-view"},(function(e){t(e.view)}))}))})),function(){return i.apply(this,arguments)})},{key:"setSidebarView",value:function(e){return this._callObjectMode||this.sendMessageToCallMachine({action:"set-sidebar-view",view:e}),this}},{key:"room",value:(r=te((function*(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeRoomConfigDefaults,n=void 0===t||t;return this._accessState.access===ei||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise((function(t){e.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:n},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))})),function(){return r.apply(this,arguments)})},{key:"geo",value:(n=te((function*(){try{var e=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield e.json()).geo}}catch(t){return{current:""}}})),function(){return n.apply(this,arguments)})},{key:"setNetworkTopology",value:(t=te((function*(e){var t=this;return Ho(),Vo(this._callState,"setNetworkTopology()"),new Promise((function(n,r){t.sendMessageToCallMachine({action:"set-network-topology",opts:e},(function(e){e.error?r({error:e.error}):n({workerId:e.workerId})}))}))})),function(e){return t.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=te((function*(){var e=this;return new Promise((function(t,n){e.needsLoad()&&t({topology:"none"}),e.sendMessageToCallMachine({action:"get-network-topology"},(function(e){e.error?n({error:e.error}):t({topology:e.topology})}))}))})),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(e){if(Ho(),"number"!=typeof e&&!0!==e&&!1!==e)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(e));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:e})}},{key:"on",value:function(e,t){return se.prototype.on.call(this,e,t)}},{key:"once",value:function(e,t){return se.prototype.once.call(this,e,t)}},{key:"off",value:function(e,t){return se.prototype.off.call(this,e,t)}},{key:"validateProperties",value:function(e){for(var t in e){if(!Fo[t])throw new Error("unrecognized property '".concat(t,"'"));if(Fo[t].validate&&!Fo[t].validate(e[t],this))throw new Error("property '".concat(t,"': ").concat(Fo[t].help))}}},{key:"assembleMeetingUrl",value:function(){var e,t,n=ko(ko({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:null!==(e=this.properties.dailyConfig)&&void 0!==e&&e.proxyUrl?encodeURIComponent(null===(t=this.properties.dailyConfig)||void 0===t?void 0:t.proxyUrl):void 0}),r=n.url.match(/\?/)?"&":"?";return n.url+r+Object.keys(Fo).filter((function(e){return Fo[e].queryString&&void 0!==n[e]})).map((function(e){return"".concat(Fo[e].queryString,"=").concat(n[e])})).join("&")}},{key:"needsLoad",value:function(){return[Wr,zr,Xr,Zr].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(e,t){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(e,t,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(e){this._messageChannel.forwardPackagedMessageToCallMachine(e,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(e,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(e)}},{key:"handleMessageFromCallMachine",value:function(e){switch(e.action){case ri:this.sendMessageToCallMachine(ko({action:ii},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var t={action:ds,level:"log",code:1011,stats:{event:"bundle load",time:"no-op"===this._bundleLoadTime?0:this._bundleLoadTime,preLoaded:"no-op"===this._bundleLoadTime,url:Be(this.properties.dailyConfig)}};this.sendMessageToCallMachine(t),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case ci:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(e);break;case hi:var n,r=ko({},e);delete r.internal,this._maxAppMessageSize=(null===(n=e.internal)||void 0===n?void 0:n._maxAppMessageSize)||os,this._joinedCallback&&(this._joinedCallback(e.participants),this._joinedCallback=null),this.emitDailyJSEvent(r);break;case fi:case mi:if(this._callState===Xr)return;if(e.participant&&e.participant.session_id){var i=e.participant.local?"local":e.participant.session_id;if(this._callObjectMode){var s=this._callMachine().store;ao(e.participant,s),co(e.participant,s),uo(e.participant,this._participants[i],s)}try{this.maybeParticipantTracksStopped(this._participants[i],e.participant),this.maybeParticipantTracksStarted(this._participants[i],e.participant),this.maybeEventRecordingStopped(this._participants[i],e.participant),this.maybeEventRecordingStarted(this._participants[i],e.participant)}catch(an){}this.compareEqualForParticipantUpdateEvent(e.participant,this._participants[i])||(this._participants[i]=ko({},e.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(e))}break;case vi:if(e.participant&&e.participant.session_id){var o=this._participants[e.participant.session_id];o&&this.maybeParticipantTracksStopped(o,null),delete this._participants[e.participant.session_id],this.emitDailyJSEvent(e)}break;case gi:Se(this._participantCounts,e.participantCounts)||(this._participantCounts=e.participantCounts,this.emitDailyJSEvent(e));break;case yi:var a={access:e.access};e.awaitingAccess&&(a.awaitingAccess=e.awaitingAccess),Se(this._accessState,a)||(this._accessState=a,this.emitDailyJSEvent(e));break;case _i:if(e.meetingSession){this._meetingSessionSummary=e.meetingSession,this.emitDailyJSEvent(e);var c=ko(ko({},e),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(c)}break;case ss:var l;this._iframe&&!e.preserveIframe&&(this._iframe.src=""),this._updateCallState(Zr),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(e.errorMsg),this._loadedCallback=null),e.preserveIframe;var u=V(e,wo);null!=u&&null!==(l=u.error)&&void 0!==l&&l.details&&(u.error.details=JSON.parse(u.error.details)),this._maybeSendToSentry(e),this._joinedCallback&&(this._joinedCallback(null,u),this._joinedCallback=null),this.emitDailyJSEvent(u);break;case pi:this._callState!==Zr&&this._updateCallState(Xr),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(e);break;case"selected-devices-updated":e.devices&&this.emitDailyJSEvent(e);break;case $i:var d=e.threshold,h=e.quality;d===this._network.threshold&&h===this._network.quality||(this._network.quality=h,this._network.threshold=d,this.emitDailyJSEvent(e));break;case Wi:e&&e.cpuLoadState&&this.emitDailyJSEvent(e);break;case zi:e&&void 0!==e.faceCounts&&this.emitDailyJSEvent(e);break;case Yi:var p=e.activeSpeaker;this._activeSpeaker.peerId!==p.peerId&&(this._activeSpeaker.peerId=p.peerId,this.emitDailyJSEvent({action:e.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var f=e.show;this._showLocalVideo=f,this.emitDailyJSEvent({action:e.action,show:f});break;case Gi:var m=e.enabled;this._activeSpeakerMode!==m&&(this._activeSpeakerMode=m,this.emitDailyJSEvent({action:e.action,enabled:this._activeSpeakerMode}));break;case Ei:case wi:case Si:this._waitingParticipants=e.allWaitingParticipants,this.emitDailyJSEvent({action:e.action,participant:e.participant});break;case ns:Se(this._receiveSettings,e.receiveSettings)||(this._receiveSettings=e.receiveSettings,this.emitDailyJSEvent({action:e.action,receiveSettings:e.receiveSettings}));break;case rs:if(!Se(this._inputSettings,e.inputSettings)){var v=this._getInputSettings();this._inputSettings=e.inputSettings,this._preloadCache.inputSettings={},Se(v,this._getInputSettings())||this.emitDailyJSEvent({action:e.action,inputSettings:this._getInputSettings()})}break;case"send-settings-updated":Se(this._sendSettings,e.sendSettings)||(this._sendSettings=e.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:e.action,sendSettings:e.sendSettings}));break;case"local-audio-level":this._localAudioLevel=e.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(e);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=e.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(e);break;case Ri:var g=e.session_id;this._rmpPlayerState[g]=e.playerState,this.emitDailyJSEvent(e);break;case Ui:delete this._rmpPlayerState[e.session_id],this.emitDailyJSEvent(e);break;case Fi:var y=e.session_id,_=this._rmpPlayerState[y];_&&this.compareEqualForRMPUpdateEvent(_,e.remoteMediaPlayerState)||(this._rmpPlayerState[y]=e.remoteMediaPlayerState,this.emitDailyJSEvent(e));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(e);break;case bi:var b=this._meetingSessionState.topology!==(e.meetingSessionState&&e.meetingSessionState.topology);this._meetingSessionState=la(e.meetingSessionState,this._callObjectMode),(this._callObjectMode||b)&&this.emitDailyJSEvent(e);break;case Bi:this._isScreenSharing=!0,this.emitDailyJSEvent(e);break;case qi:case Vi:this._isScreenSharing=!1,this.emitDailyJSEvent(e);break;case Oi:case Di:case Pi:case Li:case Ii:case Ci:case Mi:case Ai:case li:case ui:case ji:case xi:case"test-completed":case Ji:case Ni:case Ki:case Xi:case Zi:case es:case is:case ts:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(e);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(e,t){var n="record";e&&(t.local||!1!==t[n]||e[n]===t[n]||this.emitDailyJSEvent({action:Di}))}},{key:"maybeEventRecordingStarted",value:function(e,t){var n="record";e&&(t.local||!0!==t[n]||e[n]===t[n]||this.emitDailyJSEvent({action:Oi}))}},{key:"maybeEventTrackStopped",value:function(e,t,n,r){e&&("ended"!==e.readyState&&t&&e.id===t.id||this.emitDailyJSEvent({action:Ti,track:e,participant:n,type:r}))}},{key:"maybeEventTrackStarted",value:function(e,t,n,r){t&&(e&&"ended"!==e.readyState&&t.id===e.id||this.emitDailyJSEvent({action:ki,track:t,participant:n,type:r}))}},{key:"maybeParticipantTracksStopped",value:function(e,t){if(e)for(var n in e.tracks)this.maybeEventTrackStopped(e.tracks[n].track,t&&t.tracks[n]?t.tracks[n].track:null,t,n)}},{key:"maybeParticipantTracksStarted",value:function(e,t){if(t)for(var n in t.tracks)this.maybeEventTrackStarted(e&&e.tracks[n]?e.tracks[n].track:null,t.tracks[n].track,t,n)}},{key:"compareEqualForRMPUpdateEvent",value:function(e,t){var n,r;return e.state===t.state&&(null===(n=e.settings)||void 0===n?void 0:n.volume)===(null===(r=t.settings)||void 0===r?void 0:r.volume)}},{key:"emitDailyJSEvent",value:function(e){try{e.callClientId=this.callClientId,this.emit(e.action,e)}catch(t){}}},{key:"compareEqualForParticipantUpdateEvent",value:function(e,t){return!(!Se(e,t)||e.videoTrack&&t.videoTrack&&(e.videoTrack.id!==t.videoTrack.id||e.videoTrack.muted!==t.videoTrack.muted||e.videoTrack.enabled!==t.videoTrack.enabled)||e.audioTrack&&t.audioTrack&&(e.audioTrack.id!==t.audioTrack.id||e.audioTrack.muted!==t.audioTrack.muted||e.audioTrack.enabled!==t.audioTrack.enabled))}},{key:"nativeUtils",value:function(){return _s()?"undefined"==typeof DailyNativeUtils?null:DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(e){this._updateCallState(this._callState,e)}},{key:"_updateCallState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._isPreparingToJoin;if(e!==this._callState||t!==this._isPreparingToJoin){var n=this._callState,r=this._isPreparingToJoin;this._callState=e,this._isPreparingToJoin=t;var i=Yo(n,r),s=Yo(this._callState,this._isPreparingToJoin);i!==s&&(this.updateKeepDeviceAwake(s),this.updateDeviceAudioMode(s),this.updateShowAndroidOngoingMeetingNotification(s),this.updateNoOpRecordingEnsuringBackgroundContinuity(s))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Po,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:ei},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=la(Do,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=os,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(e){_s()&&this.nativeUtils().setKeepDeviceAwake(e,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(e){if(_s()&&!this.disableReactNativeAutoDeviceManagement("audio")){var t=e?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(t)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(e){if(_s()&&this.nativeUtils().setShowOngoingMeetingNotification){var t,n,r,i;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var s=this.properties.reactNativeConfig.androidInCallNotification;t=s.title,n=s.subtitle,r=s.iconName,i=s.disableForCustomOverride}i&&(e=!1),this.nativeUtils().setShowOngoingMeetingNotification(e,t,n,r,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(e){_s()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(e)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var e,t;if(_s()){var n=null===(e=this._callMachine())||void 0===e||null===(t=e.store)||void 0===t?void 0:t.getState();for(var r in null==n?void 0:n.streams){var i=n.streams[r];i&&i.pendingTrack&&"audio"===i.pendingTrack.kind&&(i.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(e){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[e]}},{key:"absoluteUrl",value:function(e){if(void 0!==e){var t=document.createElement("a");return t.href=e,t.href}}},{key:"sayHello",value:function(){return"hello, world."}},{key:"_logUseAfterDestroy",value:function(){var e=Object.values(Mo)[0];if(this.needsLoad())if(e&&!e.needsLoad()){var t={action:ds,level:"error",code:this.strictMode?9995:9997};e.sendMessageToCallMachine(t)}else this.strictMode;else{var n={action:ds,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(n,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var e=0,t=Object.values(Mo);e<t.length;e++){var n=t[e];n._callMachineInitialized?(n.sendMessageToCallMachine({action:ds,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),n._delayDuplicateInstanceLog=!1):n._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(e){var t,n,r,i,s,o;if(null===(t=e.error)||void 0===t||!t.type||["connection-error","end-of-life","no-room"].includes(e.error.type)){var a=null!==(n=this.properties)&&void 0!==n&&n.url?new URL(this.properties.url):void 0,c="production";a&&a.host.includes(".staging.daily")&&(c="staging");var l,u,d,h,p,f=new wr({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:kr,integrations:[new Jr.GlobalHandlers({onunhandledrejection:!1}),new Jr.HttpContext],environment:c}),m=new jn(f,void 0,U.version());if(this.session_id&&m.setExtra("sessionId",this.session_id),this.properties){var v=ko({},this.properties);v.userName=v.userName?"[Filtered]":void 0,v.userData=v.userData?"[Filtered]":void 0,v.token=v.token?"[Filtered]":void 0,m.setExtra("properties",v)}if(a){var g=a.searchParams.get("domain");if(!g){var y=a.host.match(/(.*?)\./);g=y&&y[1]||""}g&&m.setTag("domain",g)}e.error&&(m.setTag("fatalErrorType",e.error.type),m.setExtra("errorDetails",e.error.details),(null===(l=e.error.details)||void 0===l?void 0:l.uri)&&m.setTag("serverAddress",e.error.details.uri),(null===(u=e.error.details)||void 0===u?void 0:u.workerGroup)&&m.setTag("workerGroup",e.error.details.workerGroup),(null===(d=e.error.details)||void 0===d?void 0:d.geoGroup)&&m.setTag("geoGroup",e.error.details.geoGroup),(null===(h=e.error.details)||void 0===h?void 0:h.on)&&m.setTag("connectionAttempt",e.error.details.on),null!==(p=e.error.details)&&void 0!==p&&p.bundleUrl&&(m.setTag("bundleUrl",e.error.details.bundleUrl),m.setTag("bundleError",e.error.details.sourceError.type))),m.setTags({callMode:this._callObjectMode?_s()?"reactNative":null!==(r=this.properties)&&void 0!==r&&null!==(i=r.dailyConfig)&&void 0!==i&&null!==(s=i.callMode)&&void 0!==s&&s.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:U.version()});var _=(null===(o=e.error)||void 0===o?void 0:o.msg)||e.errorMsg;m.run((function(e){e.captureException(new Error(_))}))}}},{key:"_callMachine",value:function(){var e,t,n;return null===(e=window._daily)||void 0===e||null===(t=e.instances)||void 0===t||null===(n=t[this.callClientId])||void 0===n?void 0:n.callMachine}}],[{key:"supportedBrowser",value:function(){if(_s())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var e=xe.getParser(ys());return{supported:!!Ts(),mobile:"mobile"===e.getPlatformType(),name:e.getBrowserName(),version:e.getBrowserVersion(),supportsFullscreen:!!Es(),supportsScreenShare:!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&(function(e,t){if(!e||!t)return!0;switch(e){case"Chrome":return t.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(13===t.major&&0===t.minor&&0===t.point);case"Firefox":return t.major>=67}return!0}(As(),Os())||_s())),supportsSfu:!!Ts(),supportsVideoProcessing:Ss(),supportsAudioProcessing:ks()}}},{key:"version",value:function(){return"0.72.2"}},{key:"createCallObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.layout="none",new U(null,e)}},{key:"wrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ho(),!e||!e.contentWindow||"string"!=typeof e.src)throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return t.layout||(t.customLayout?t.layout="custom-v1":t.layout="browser"),new U(e,t)}},{key:"createFrame",value:function(e,t){var n,r;Ho(),e&&t?(n=e,r=t):e&&e.append?(n=e,r={}):(n=document.body,r=e||{});var i=r.iframeStyle;i||(i=n===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var s=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?s.allow="microphone, camera":s.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",s.style.visibility="hidden",n.appendChild(s),s.style.visibility=null,Object.keys(i).forEach((function(e){return s.style[e]=i[e]})),r.layout||(r.customLayout?r.layout="custom-v1":r.layout="browser");try{return new U(s,r)}catch(o){throw n.removeChild(s),o}}},{key:"createTransparentFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ho();var t=document.createElement("iframe");return t.allow="microphone; camera; autoplay",t.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border: 0;\n      pointer-events: none;\n    ",document.body.appendChild(t),e.layout||(e.layout="custom-v1"),U.wrap(t,e)}},{key:"getCallInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?Mo[e]:Object.values(Mo)[0]}}]),U}();function qo(e,t){var n={};for(var r in e)if(e[r]instanceof MediaStreamTrack)n[r]=hs;else if("dailyConfig"===r){if(e[r].modifyLocalSdpHook){var i=window._daily.instances[t].customCallbacks||{};i.modifyLocalSdpHook=e[r].modifyLocalSdpHook,window._daily.instances[t].customCallbacks=i,delete e[r].modifyLocalSdpHook}if(e[r].modifyRemoteSdpHook){var s=window._daily.instances[t].customCallbacks||{};s.modifyRemoteSdpHook=e[r].modifyRemoteSdpHook,window._daily.instances[t].customCallbacks=s,delete e[r].modifyRemoteSdpHook}n[r]=e[r]}else n[r]=e[r];return n}function Vo(e){var t=arguments.length>2?arguments[2]:void 0;if(e!==Kr){var n="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," only supported after join.");throw t&&(n+=" ".concat(t)),new Error(n)}}function Yo(e,t){return[Qr,Kr].includes(e)||t}function Go(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(Yo(e,t)){var i="".concat(n," not supported after joining a meeting.");throw r&&(i+=" ".concat(r)),new Error(i)}}function $o(e){var t=arguments.length>2?arguments[2]:void 0;if(!e){var n="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method",arguments.length>3&&void 0!==arguments[3]&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw t&&(n+=" ".concat(t)),new Error(n)}}function Jo(e){if(e){var t="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw new Error(t)}}function Wo(e){if(!e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw new Error(t)}}function zo(e){if(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw new Error(t)}}function Ho(){if(_s())throw new Error("This daily-js method is not currently supported in React Native")}function Qo(){if(!_s())throw new Error("This daily-js method is only supported in React Native")}function Ko(e){if(void 0===e)return!0;var t;if("string"==typeof e)t=e;else try{t=JSON.stringify(e),Se(JSON.parse(t),e)}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(t.length>4096)throw Error("userData is too large (".concat(t.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Xo(e,t){for(var n=t.allowAllParticipantsKey,r=function(e){return!!(void 0===e.layer||Number.isInteger(e.layer)&&e.layer>=0||"inherit"===e.layer)},i=function(e){return!(!e||e.video&&!r(e.video)||e.screenVideo&&!r(e.screenVideo))},s=0,o=Object.entries(e);s<o.length;s++){var a=re(o[s],2),c=a[0],l=a[1];if(u=c,d=void 0,d=["local"],n||d.push("*"),!u||d.includes(u)||!i(l))return!1}var u,d;return!0}function Zo(e){return!("object"!==G(e)||e.video&&("object"!==G(e.video)||!function(e){var t,n=["type","config"];if(!e)return!1;if("object"!==G(e))return!1;if("string"!=typeof(t=e.type)||!Object.values(ps).includes(t))return!1;if(e.config){if("object"!==G(e.config))return!1;if(!function(e,t){var n,r,i,s=Object.keys(t);if(0===s.length)return!0;switch(e){case ps.BGBLUR:return!(s.length>1||"strength"!==s[0]||"number"!=typeof t.strength||t.strength<=0||t.strength>1||isNaN(t.strength));case ps.BGIMAGE:return!(void 0!==t.source&&(n=t,!("default"===n.source?(n.type="default",1):n.source instanceof ArrayBuffer||(qe(n.source)?(n.type="url",function(e){var t=new URL(e),n=t.pathname;if("data:"===t.protocol)try{var r=n.substring(n.indexOf(":")+1,n.indexOf(";")).split("/")[1];return vs.includes(r)}catch(s){return!1}var i=n.split(".").at(-1).toLowerCase().trim();return vs.includes(i)}(n.source)):(r=n.source,i=Number(r),!(isNaN(i)||!Number.isInteger(i)||i<=0||i>10)&&(n.type="daily-preselect",1))))));default:return!0}}(e.type,e.config))return!1}return Object.keys(e).filter((function(e){return!n.includes(e)})).forEach((function(t){delete e[t]})),!0}(e.video.processor))||e.audio&&("object"!==G(e.audio)||(n=e.audio.processor,r=["type"],!n||"object"!==G(n)||(Object.keys(n).filter((function(e){return!r.includes(e)})).forEach((function(e){delete n[e]})),t=n.type,"string"!=typeof t||!Object.values(fs).includes(t)))));var t,n,r}function ea(e,t){var n,r=[];e.video&&!Ss(null!==(n=null==t?void 0:t.useLegacyVideoProcessor)&&void 0!==n&&n)&&(delete e.video,r.push("video")),e.audio&&!ks()&&(delete e.audio,r.push("audio")),r.length}function ta(){var e=Object.values(ps).join(" | "),t=Object.values(fs).join(" | ");return"inputSettings must be of the form: { video?: { processor: { type: [ ".concat(e," ], config?: {} } }, audio?: { processor: {type: [ ").concat(t," ] } } }")}function na(e){var t=e.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(ni).concat(t?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function ra(e){if(e&&"object"!==G(e)||Array.isArray(e))return!1;if(e)for(var t=0,n=Object.entries(e);t<n.length;t++)for(var r=re(n[t],1)[0],i=0,s=Object.entries(e[r]);i<s.length;i++){var o=re(s[i],2),a=o[0],c=o[1];if("iconPath"===a&&!qe(c))return!1;if("iconPathDarkMode"===a&&!qe(c))return!1;var l=xo.id[a];if(!l)return!1;if(G(c)!==l)return!1}return!0}function ia(e){if(!e||e&&"object"!==G(e)||Array.isArray(e))return!1;for(var t=function(e){return"".concat(e," should be ").concat(Ro.id[e])},n=0,r=Object.entries(e);n<r.length;n++){var i=re(r[n],1)[0];if(!("label"in e[i]))return!1;if(!("location"in e[i]))return!1;if(!("src"in e[i])&&!("srcdoc"in e[i]))return!1;for(var s=0,o=Object.entries(e[i]);s<o.length;s++){var a=re(o[s],2),c=a[0],l=a[1];switch(c){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if("string"!=typeof l)return t(c),!1;break;case"iconURL":if(!qe(l))return"".concat(c," should be a url"),!1;break;case"src":if("srcdoc"in e[i])return!1;if(!qe(l))return'src "'.concat(l,'" is not a valid URL'),!1;break;case"srcdoc":if("src"in e[i])return!1;if("string"!=typeof l)return t(c),!1;break;case"location":if(!["main","sidebar"].includes(l))return t(c),!1;break;case"controlledBy":if("*"!==l&&"owners"!==l&&(!Array.isArray(l)||l.some((function(e){return"string"!=typeof e}))))return t(c),!1;break;case"shared":if((!Array.isArray(l)||l.some((function(e){return"string"!=typeof e})))&&"owners"!==l&&"boolean"!=typeof l)return t(c),!1;break;default:if(!Ro.id[c])return!1}}}return!0}function sa(e,t){if(void 0===t)return!1;switch(G(t)){case"string":return G(e)===t;case"object":if("object"!==G(e))return!1;for(var n in e)if(!sa(e[n],t[n]))return!1;return!0;default:return!1}}function oa(e,t){var n=e.sessionId,r=e.toEndPoint,i=e.useSipRefer;if(!n||!r)throw new Error("".concat(t,"() requires a sessionId and toEndPoint"));if("string"!=typeof n||"string"!=typeof r)throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(i&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'))}function aa(e){if("object"!==G(e))throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(e.state&&!Object.values(ms).includes(e.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(ms));if(e.volume){if("number"!=typeof e.volume)throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(e.volume<0||e.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function ca(e,t,n){return!("number"!=typeof e||e<t||e>n)}function la(e,t){return e&&!t&&delete e.data,e}const ua=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:ti,DAILY_ACCESS_LEVEL_LOBBY:"lobby",DAILY_ACCESS_LEVEL_NONE:"none",DAILY_ACCESS_UNKNOWN:ei,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:"cam-mic-in-use",DAILY_CAMERA_ERROR_CAM_IN_USE:"cam-in-use",DAILY_CAMERA_ERROR_CONSTRAINTS:"constraints",DAILY_CAMERA_ERROR_MIC_IN_USE:"mic-in-use",DAILY_CAMERA_ERROR_NOT_FOUND:"not-found",DAILY_CAMERA_ERROR_PERMISSIONS:"permissions",DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:"undefined-mediadevices",DAILY_CAMERA_ERROR_UNKNOWN:"unknown",DAILY_EVENT_ACCESS_STATE_UPDATED:yi,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:Yi,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:Gi,DAILY_EVENT_APP_MSG:ji,DAILY_EVENT_CAMERA_ERROR:ui,DAILY_EVENT_CPU_LOAD_CHANGE:Wi,DAILY_EVENT_ERROR:ss,DAILY_EVENT_EXIT_FULLSCREEN:Qi,DAILY_EVENT_FACE_COUNTS_UPDATED:zi,DAILY_EVENT_FULLSCREEN:Hi,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:ii,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:ri,DAILY_EVENT_INPUT_SETTINGS_UPDATED:rs,DAILY_EVENT_JOINED_MEETING:hi,DAILY_EVENT_JOINING_MEETING:di,DAILY_EVENT_LANG_UPDATED:ts,DAILY_EVENT_LEFT_MEETING:pi,DAILY_EVENT_LIVE_STREAMING_ERROR:es,DAILY_EVENT_LIVE_STREAMING_STARTED:Ki,DAILY_EVENT_LIVE_STREAMING_STOPPED:Zi,DAILY_EVENT_LIVE_STREAMING_UPDATED:Xi,DAILY_EVENT_LOADED:ci,DAILY_EVENT_LOADING:oi,DAILY_EVENT_LOAD_ATTEMPT_FAILED:ai,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:Vi,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:Bi,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:qi,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:"meeting-session-data-error",DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:bi,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:_i,DAILY_EVENT_NETWORK_CONNECTION:Ji,DAILY_EVENT_NETWORK_QUALITY_CHANGE:$i,DAILY_EVENT_NONFATAL_ERROR:is,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:gi,DAILY_EVENT_PARTICIPANT_JOINED:fi,DAILY_EVENT_PARTICIPANT_LEFT:vi,DAILY_EVENT_PARTICIPANT_UPDATED:mi,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:ns,DAILY_EVENT_RECORDING_DATA:Ni,DAILY_EVENT_RECORDING_ERROR:Li,DAILY_EVENT_RECORDING_STARTED:Oi,DAILY_EVENT_RECORDING_STATS:Pi,DAILY_EVENT_RECORDING_STOPPED:Di,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:Ii,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:Ri,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:Ui,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:Fi,DAILY_EVENT_STARTED_CAMERA:li,DAILY_EVENT_THEME_UPDATED:si,DAILY_EVENT_TRACK_STARTED:ki,DAILY_EVENT_TRACK_STOPPED:Ti,DAILY_EVENT_TRANSCRIPTION_ERROR:Ai,DAILY_EVENT_TRANSCRIPTION_MSG:xi,DAILY_EVENT_TRANSCRIPTION_STARTED:Ci,DAILY_EVENT_TRANSCRIPTION_STOPPED:Mi,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:Ei,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:Si,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:wi,DAILY_FATAL_ERROR_CONNECTION:"connection-error",DAILY_FATAL_ERROR_EJECTED:"ejected",DAILY_FATAL_ERROR_EOL:"end-of-life",DAILY_FATAL_ERROR_EXP_ROOM:"exp-room",DAILY_FATAL_ERROR_EXP_TOKEN:"exp-token",DAILY_FATAL_ERROR_MEETING_FULL:"meeting-full",DAILY_FATAL_ERROR_NBF_ROOM:"nbf-room",DAILY_FATAL_ERROR_NBF_TOKEN:"nbf-token",DAILY_FATAL_ERROR_NOT_ALLOWED:"not-allowed",DAILY_FATAL_ERROR_NO_ROOM:"no-room",DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:"*",DAILY_RECEIVE_SETTINGS_BASE_KEY:ni,DAILY_STATE_ERROR:Zr,DAILY_STATE_JOINED:Kr,DAILY_STATE_JOINING:Qr,DAILY_STATE_LEFT:Xr,DAILY_STATE_NEW:Wr,DAILY_TRACK_STATE_BLOCKED:"blocked",DAILY_TRACK_STATE_INTERRUPTED:"interrupted",DAILY_TRACK_STATE_LOADING:"loading",DAILY_TRACK_STATE_OFF:"off",DAILY_TRACK_STATE_PLAYABLE:"playable",DAILY_TRACK_STATE_SENDABLE:"sendable",default:Bo},Symbol.toStringTag,{value:"Module"})),da=s(ua);var ha,pa={exports:{}},fa="object"==typeof Reflect?Reflect:null,ma=fa&&"function"==typeof fa.apply?fa.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};ha=fa&&"function"==typeof fa.ownKeys?fa.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var va=Number.isNaN||function(e){return e!=e};function ga(){ga.init.call(this)}pa.exports=ga,pa.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}Ma(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&Ma(e,"error",t,n)}(e,i,{once:!0})}))},ga.EventEmitter=ga,ga.prototype._events=void 0,ga.prototype._eventsCount=0,ga.prototype._maxListeners=void 0;var ya=10;function _a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function ba(e){return void 0===e._maxListeners?ga.defaultMaxListeners:e._maxListeners}function Ea(e,t,n,r){var i,s,o;if(_a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=ba(e))>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,console&&console.warn}return e}function wa(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Sa(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=wa.bind(r);return i.listener=n,r.wrapFn=i,i}function ka(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):Ca(i,i.length)}function Ta(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function Ca(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Ma(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(ga,"defaultMaxListeners",{enumerable:!0,get:function(){return ya},set:function(e){if("number"!=typeof e||e<0||va(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ya=e}}),ga.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ga.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||va(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ga.prototype.getMaxListeners=function(){return ba(this)},ga.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)ma(a,this,t);else{var c=a.length,l=Ca(a,c);for(n=0;n<c;++n)ma(l[n],this,t)}return!0},ga.prototype.addListener=function(e,t){return Ea(this,e,t,!1)},ga.prototype.on=ga.prototype.addListener,ga.prototype.prependListener=function(e,t){return Ea(this,e,t,!0)},ga.prototype.once=function(e,t){return _a(t),this.on(e,Sa(this,e,t)),this},ga.prototype.prependOnceListener=function(e,t){return _a(t),this.prependListener(e,Sa(this,e,t)),this},ga.prototype.removeListener=function(e,t){var n,r,i,s,o;if(_a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},ga.prototype.off=ga.prototype.removeListener,ga.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},ga.prototype.listeners=function(e){return ka(this,e,!0)},ga.prototype.rawListeners=function(e){return ka(this,e,!1)},ga.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Ta.call(e,t)},ga.prototype.listenerCount=Ta,ga.prototype.eventNames=function(){return this._eventsCount>0?ha(this._events):[]};var Aa,Oa,Da,Pa=pa.exports,La={},Ia={};Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.Api=Ia.HttpClient=Ia.ContentType=Ia.AuthenticationType=void 0,(Aa||(Ia.AuthenticationType=Aa={})).OAUTH2="oauth2",(Da=Oa||(Ia.ContentType=Oa={})).Json="application/json",Da.FormData="multipart/form-data",Da.UrlEncoded="application/x-www-form-urlencoded",Da.Text="text/plain";class Na{constructor(e={}){n(this,"baseUrl",""),n(this,"securityData",null),n(this,"securityWorker"),n(this,"abortControllers",new Map),n(this,"customFetch",((...e)=>fetch(...e))),n(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"}),n(this,"setSecurityData",(e=>{this.securityData=e})),n(this,"contentFormatters",{[Oa.Json]:e=>null===e||"object"!=typeof e&&"string"!=typeof e?e:JSON.stringify(e),[Oa.Text]:e=>null!==e&&"string"!=typeof e?JSON.stringify(e):e,[Oa.FormData]:e=>Object.keys(e||{}).reduce(((t,n)=>{const r=e[n];return t.append(n,r instanceof Blob?r:"object"==typeof r&&null!==r?JSON.stringify(r):`${r}`),t}),new FormData),[Oa.UrlEncoded]:e=>this.toQueryString(e)}),n(this,"createAbortSignal",(e=>{if(this.abortControllers.has(e)){const t=this.abortControllers.get(e);return t?t.signal:void 0}const t=new AbortController;return this.abortControllers.set(e,t),t.signal})),n(this,"abortRequest",(e=>{const t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))})),n(this,"request",(async({body:e,secure:t,path:n,type:r,query:i,format:s,baseUrl:o,cancelToken:a,...c})=>{const l=("boolean"==typeof t?t:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},u=this.mergeRequestParams(c,l),d=i&&this.toQueryString(i),h=this.contentFormatters[r||Oa.Json],p=s||u.format;return this.customFetch(`${o||this.baseUrl||""}${n}${d?`?${d}`:""}`,{...u,headers:{...u.headers||{},...r&&r!==Oa.FormData?{"Content-Type":r}:{}},signal:(a?this.createAbortSignal(a):u.signal)||null,body:null==e?null:h(e)}).then((async e=>{const t=e.clone();t.data=null,t.error=null;const n=p?await e[p]().then((e=>(t.ok?t.data=e:t.error=e,t))).catch((e=>(t.error=e,t))):t;if(a&&this.abortControllers.delete(a),!e.ok)throw n;return n}))})),Object.assign(this,e)}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent("number"==typeof t?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map((e=>this.encodeQueryParam(t,e))).join("&")}toQueryString(e){const t=e||{};return Object.keys(t).filter((e=>void 0!==t[e])).map((e=>Array.isArray(t[e])?this.addArrayQueryParam(t,e):this.addQueryParam(t,e))).join("&")}addQueryParams(e){const t=this.toQueryString(e);return t?`?${t}`:""}mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}}Ia.HttpClient=Na,Ia.Api=class extends Na{constructor(){super(...arguments),n(this,"call",{callControllerCreate:(e,t={})=>this.request({path:"/call",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),callControllerFindAll:(e,t={})=>this.request({path:"/call",method:"GET",query:e,secure:!0,format:"json",...t}),callControllerFindOne:(e,t={})=>this.request({path:`/call/${e}`,method:"GET",secure:!0,format:"json",...t}),callControllerUpdate:(e,t,n={})=>this.request({path:`/call/${e}`,method:"PATCH",body:t,secure:!0,type:Oa.Json,format:"json",...n}),callControllerDeleteCallData:(e,t={})=>this.request({path:`/call/${e}`,method:"DELETE",secure:!0,format:"json",...t}),callControllerCreatePhoneCall:(e,t={})=>this.request({path:"/call/phone",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),callControllerCreateWebCall:(e,t={})=>this.request({path:"/call/web",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t})}),n(this,"v2",{callControllerFindAllPaginated:(e,t={})=>this.request({path:"/v2/call",method:"GET",query:e,secure:!0,format:"json",...t}),callControllerFindAllMetadataPaginated:(e,t={})=>this.request({path:"/v2/call/metadata",method:"GET",query:e,secure:!0,format:"json",...t}),phoneNumberControllerFindAllPaginated:(e,t={})=>this.request({path:"/v2/phone-number",method:"GET",query:e,secure:!0,format:"json",...t})}),n(this,"assistant",{assistantControllerCreate:(e,t={})=>this.request({path:"/assistant",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),assistantControllerFindAll:(e,t={})=>this.request({path:"/assistant",method:"GET",query:e,secure:!0,format:"json",...t}),assistantControllerFindOne:(e,t={})=>this.request({path:`/assistant/${e}`,method:"GET",secure:!0,format:"json",...t}),assistantControllerUpdate:(e,t,n={})=>this.request({path:`/assistant/${e}`,method:"PATCH",body:t,secure:!0,type:Oa.Json,format:"json",...n}),assistantControllerReplace:(e,t,n={})=>this.request({path:`/assistant/${e}`,method:"PUT",body:t,secure:!0,type:Oa.Json,format:"json",...n}),assistantControllerRemove:(e,t={})=>this.request({path:`/assistant/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"phoneNumber",{phoneNumberControllerBuy:(e,t={})=>this.request({path:"/phone-number/buy",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),phoneNumberControllerImportTwilio:(e,t={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),phoneNumberControllerImportVonage:(e,t={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),phoneNumberControllerCreate:(e,t={})=>this.request({path:"/phone-number",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),phoneNumberControllerFindAll:(e,t={})=>this.request({path:"/phone-number",method:"GET",query:e,secure:!0,format:"json",...t}),phoneNumberControllerFindOne:(e,t={})=>this.request({path:`/phone-number/${e}`,method:"GET",secure:!0,format:"json",...t}),phoneNumberControllerUpdate:(e,t,n={})=>this.request({path:`/phone-number/${e}`,method:"PATCH",body:t,secure:!0,type:Oa.Json,format:"json",...n}),phoneNumberControllerRemove:(e,t={})=>this.request({path:`/phone-number/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"squad",{squadControllerCreate:(e,t={})=>this.request({path:"/squad",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),squadControllerFindAll:(e,t={})=>this.request({path:"/squad",method:"GET",query:e,secure:!0,format:"json",...t}),squadControllerFindOne:(e,t={})=>this.request({path:`/squad/${e}`,method:"GET",secure:!0,format:"json",...t}),squadControllerUpdate:(e,t,n={})=>this.request({path:`/squad/${e}`,method:"PATCH",body:t,secure:!0,type:Oa.Json,format:"json",...n}),squadControllerRemove:(e,t={})=>this.request({path:`/squad/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"knowledgeBase",{knowledgeBaseControllerCreate:(e,t={})=>this.request({path:"/knowledge-base",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),knowledgeBaseControllerFindAll:(e,t={})=>this.request({path:"/knowledge-base",method:"GET",query:e,secure:!0,format:"json",...t}),knowledgeBaseControllerFindOne:(e,t={})=>this.request({path:`/knowledge-base/${e}`,method:"GET",secure:!0,format:"json",...t}),knowledgeBaseControllerUpdate:(e,t={})=>this.request({path:`/knowledge-base/${e}`,method:"PATCH",secure:!0,format:"json",...t}),knowledgeBaseControllerRemove:(e,t={})=>this.request({path:`/knowledge-base/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"block",{blockControllerCreate:(e,t={})=>this.request({path:"/block",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),blockControllerFindAll:(e,t={})=>this.request({path:"/block",method:"GET",query:e,secure:!0,format:"json",...t}),blockControllerFindOne:(e,t={})=>this.request({path:`/block/${e}`,method:"GET",secure:!0,format:"json",...t}),blockControllerUpdate:(e,t,n={})=>this.request({path:`/block/${e}`,method:"PATCH",body:t,secure:!0,type:Oa.Json,format:"json",...n}),blockControllerRemove:(e,t={})=>this.request({path:`/block/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"tool",{toolControllerCreate:(e,t={})=>this.request({path:"/tool",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),toolControllerFindAll:(e,t={})=>this.request({path:"/tool",method:"GET",query:e,secure:!0,format:"json",...t}),toolControllerFindOne:(e,t={})=>this.request({path:`/tool/${e}`,method:"GET",secure:!0,format:"json",...t}),toolControllerUpdate:(e,t,n={})=>this.request({path:`/tool/${e}`,method:"PATCH",body:t,secure:!0,type:Oa.Json,format:"json",...n}),toolControllerRemove:(e,t={})=>this.request({path:`/tool/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"file",{fileControllerCreateDeprecated:(e,t={})=>this.request({path:"/file/upload",method:"POST",body:e,secure:!0,type:Oa.FormData,format:"json",...t}),fileControllerCreate:(e,t={})=>this.request({path:"/file",method:"POST",body:e,secure:!0,type:Oa.FormData,format:"json",...t}),fileControllerFindAll:(e={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...e}),fileControllerFindOne:(e,t={})=>this.request({path:`/file/${e}`,method:"GET",secure:!0,format:"json",...t}),fileControllerUpdate:(e,t,n={})=>this.request({path:`/file/${e}`,method:"PATCH",body:t,secure:!0,type:Oa.Json,format:"json",...n}),fileControllerRemove:(e,t={})=>this.request({path:`/file/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"metrics",{analyticsControllerFindAllDeprecated:(e,t={})=>this.request({path:"/metrics",method:"GET",query:e,secure:!0,format:"json",...t})}),n(this,"analytics",{analyticsControllerQuery:(e,t={})=>this.request({path:"/analytics",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),analyticsControllerGetQuery:(e,t={})=>this.request({path:"/analytics",method:"GET",body:e,secure:!0,type:Oa.Json,format:"json",...t})}),n(this,"log",{loggingControllerGetCallLogs:(e,t={})=>this.request({path:"/log",method:"GET",query:e,secure:!0,format:"json",...t})}),n(this,"logs",{loggingControllerQueryLogs:(e,t={})=>this.request({path:"/logs",method:"GET",query:e,secure:!0,format:"json",...t})}),n(this,"chat",{chatControllerChat:(e,t={})=>this.request({path:"/chat",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t})}),n(this,"credential",{credentialControllerCreate:(e,t={})=>this.request({path:"/credential",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),credentialControllerFindAll:(e,t={})=>this.request({path:"/credential",method:"GET",query:e,secure:!0,format:"json",...t}),credentialControllerFindOne:(e,t={})=>this.request({path:`/credential/${e}`,method:"GET",secure:!0,format:"json",...t}),credentialControllerRemove:(e,t={})=>this.request({path:`/credential/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"provider",{providerControllerGetWorkflows:(e,t,n={})=>this.request({path:`/${e}/workflows`,method:"GET",query:t,secure:!0,format:"json",...n}),providerControllerGetWorkflowTriggerHook:(e,t,n={})=>this.request({path:`/${e}/workflows/${t}/hooks`,method:"GET",secure:!0,format:"json",...n}),providerControllerGetLocations:(e,t={})=>this.request({path:`/${e}/locations`,method:"GET",secure:!0,format:"json",...t}),voiceProviderControllerSearchVoices:(e,t,n={})=>this.request({path:`/${e}/voices/search`,method:"GET",query:t,secure:!0,format:"json",...n}),voiceProviderControllerSearchVoice:(e,t,n={})=>this.request({path:`/${e}/voice/search`,method:"GET",query:t,secure:!0,format:"json",...n}),voiceProviderControllerAddVoices:(e,t,n={})=>this.request({path:`/${e}/voices/add`,method:"POST",body:t,secure:!0,type:Oa.Json,format:"json",...n}),voiceProviderControllerAddVoice:(e,t,n={})=>this.request({path:`/${e}/voice/add`,method:"POST",body:t,secure:!0,type:Oa.Json,format:"json",...n})}),n(this,"v11Labs",{voiceProviderControllerCloneVoices:(e,t={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:e,secure:!0,type:Oa.FormData,...t})}),n(this,"token",{tokenControllerCreate:(e,t={})=>this.request({path:"/token",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t}),tokenControllerFindAll:(e,t={})=>this.request({path:"/token",method:"GET",query:e,secure:!0,format:"json",...t}),tokenControllerFindOne:(e,t={})=>this.request({path:`/token/${e}`,method:"GET",secure:!0,format:"json",...t}),tokenControllerUpdate:(e,t,n={})=>this.request({path:`/token/${e}`,method:"PATCH",body:t,secure:!0,type:Oa.Json,format:"json",...n}),tokenControllerRemove:(e,t={})=>this.request({path:`/token/${e}`,method:"DELETE",secure:!0,format:"json",...t})}),n(this,"voiceLibrary",{voiceLibraryControllerVoiceGetByProvider:(e,t,n={})=>this.request({path:`/voice-library/${e}`,method:"GET",query:t,secure:!0,format:"json",...n}),voiceLibraryControllerVoiceGetAccentsByProvider:(e,t={})=>this.request({path:`/voice-library/${e}/accents`,method:"GET",secure:!0,format:"json",...t}),voiceLibraryControllerVoiceLibrarySyncByProvider:(e,t={})=>this.request({path:`/voice-library/sync/${e}`,method:"POST",secure:!0,format:"json",...t}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(e,t={})=>this.request({path:"/voice-library/sync",method:"POST",body:e,secure:!0,type:Oa.Json,format:"json",...t})})}},Object.defineProperty(La,"__esModule",{value:!0}),La.client=void 0;const ja=new Ia.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async e=>{if(e)return{headers:{Authorization:`Bearer ${e}`}}}});La.client=ja;var xa=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(S,"__esModule",{value:!0});const Ra=xa(da),Fa=xa(Pa),Ua=La;async function Ba(e,t){const n=document.createElement("audio");return n.dataset.participantId=t,document.body.appendChild(n),await async function(e,t){e.muted=!1,e.autoplay=!0,null!=t&&(e.srcObject=new MediaStream([t]),await e.play())}(n,e),n}class qa extends Fa.default{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t)}removeListener(e,t){return super.removeListener(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}}var Va=S.default=class extends qa{constructor(e,t,r,i){super(),n(this,"started",!1),n(this,"call",null),n(this,"speakingTimeout",null),n(this,"dailyCallConfig",{}),n(this,"dailyCallObject",{}),n(this,"hasEmittedCallEndedStatus",!1),Ua.client.baseUrl=t??"https://api.vapi.ai",Ua.client.setSecurityData(e),this.dailyCallConfig=r??{},this.dailyCallObject=i??{}}cleanup(){var e;this.started=!1,this.hasEmittedCallEndedStatus=!1,null==(e=this.call)||e.destroy(),this.call=null,this.speakingTimeout=null}isMobileDevice(){if("undefined"==typeof navigator)return!1;const e=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(e.toLowerCase())}async sleep(e){return new Promise((t=>setTimeout(t,e)))}async start(e,t,n){var r,i,s;if(!e&&!n)throw new Error("Assistant or Squad must be provided.");if(this.started)return null;this.started=!0;try{const o=(await Ua.client.call.callControllerCreateWebCall({assistant:"string"==typeof e?void 0:e,assistantId:"string"==typeof e?e:void 0,assistantOverrides:t,squad:"string"==typeof n?void 0:n,squadId:"string"==typeof n?n:void 0})).data;this.call&&this.cleanup();const a=(null==(r=null==o?void 0:o.artifactPlan)?void 0:r.videoRecordingEnabled)??!1,c=(null==(i=o.transport)?void 0:i.assistantVideoEnabled)??!1;if(this.call=Ra.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??a,dailyConfig:this.dailyCallConfig}),null==(s=this.call.iframe())||s.style.setProperty("display","none"),this.call.on("left-meeting",(()=>{var e;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),a&&(null==(e=this.call)||e.stopRecording()),this.cleanup()})),this.call.on("error",(e=>{var t;this.emit("error",e),a&&(null==(t=this.call)||t.stopRecording())})),this.call.on("camera-error",(e=>{this.emit("error",e)})),this.call.on("track-started",(async e=>{var t,n,r;e&&e.participant&&((null==(t=e.participant)?void 0:t.local)||"Vapi Speaker"===(null==(n=e.participant)?void 0:n.user_name)&&("video"===e.track.kind&&this.emit("video",e.track),"audio"===e.track.kind&&await Ba(e.track,e.participant.session_id),null==(r=this.call)||r.sendAppMessage("playable")))})),this.call.on("participant-joined",(e=>{e&&this.call&&function(e,t,n,r){e.participant.local||t.updateParticipant(e.participant.session_id,{setSubscribedTracks:{audio:!0,video:n||r}})}(e,this.call,a,c)})),this.call.on("participant-updated",(e=>{e&&this.emit("daily-participant-updated",e.participant)})),this.call.on("participant-left",(e=>{e&&function(e){const t=document.querySelector(`audio[data-participant-id="${e}"]`);null==t||t.remove()}(e.participant.session_id)})),this.isMobileDevice()&&await this.sleep(1e3),await this.call.join({url:o.webCallUrl,subscribeToTracksAutomatically:!1}),a){const e=(new Date).getTime();this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}}),this.call.on("recording-started",(()=>{this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:((new Date).getTime()-e)/1e3})}))}return this.call.startRemoteParticipantsAudioLevelObserver(100),this.call.on("remote-participants-audio-level",(e=>{e&&this.handleRemoteParticipantsAudioLevel(e)})),this.call.on("app-message",(e=>this.onAppMessage(e))),this.call.on("nonfatal-error",(e=>{var t;"audio-processor-error"===(null==e?void 0:e.type)&&(null==(t=this.call)||t.updateInputSettings({audio:{processor:{type:"none"}}}).then((()=>{var e;null==(e=this.call)||e.setLocalAudio(!0)})))})),this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}}),o}catch(an){return this.emit("error",an),this.cleanup(),null}}onAppMessage(e){if(e)try{if("listening"===e.data)return this.emit("call-start");try{const t=JSON.parse(e.data);this.emit("message",t),t&&"type"in t&&"status"in t&&"status-update"===t.type&&"ended"===t.status&&(this.hasEmittedCallEndedStatus=!0)}catch(t){}}catch(n){}}handleRemoteParticipantsAudioLevel(e){const t=Object.values(e.participantsAudioLevel).reduce(((e,t)=>e+t),0);this.emit("volume-level",Math.min(1,t/.15)),t>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout((()=>{this.emit("speech-end"),this.speakingTimeout=null}),1e3))}stop(){var e;this.started=!1,null==(e=this.call)||e.destroy(),this.call=null}send(e){var t;null==(t=this.call)||t.sendAppMessage(JSON.stringify(e))}setMuted(e){if(!this.call)throw new Error("Call object is not available.");this.call.setLocalAudio(!e)}isMuted(){return!!this.call&&!1===this.call.localAudio()}say(e,t){this.send({type:"say",message:e,endCallAfterSpoken:t})}setInputDevicesAsync(e){var t;null==(t=this.call)||t.setInputDevicesAsync(e)}setOutputDeviceAsync(e){var t;null==(t=this.call)||t.setOutputDeviceAsync(e)}getDailyCallObject(){return this.call}startScreenSharing(e,t){var n;null==(n=this.call)||n.startScreenShare({displayMediaOptions:e,screenVideoSendSettings:t})}stopScreenSharing(){var e;null==(e=this.call)||e.stopScreenShare()}};const Ya=()=>{const[e,t]=r.useState(""),[n,i]=r.useState([]),[s,o]=r.useState(!1),[a,c]=r.useState(""),[l,u]=r.useState(!1),[d,h]=r.useState(!1),[p,f]=r.useState(!1),[m,v]=r.useState(null),[g,_]=r.useState(null),b=r.useRef(null),S=r.useRef(null),k=r.useRef(null),T=r.useRef(null);r.useEffect((()=>{if(c(crypto.randomUUID()),!S.current){const e=new Audio;e.addEventListener("ended",(()=>f(!1))),S.current=e}return()=>{S.current&&(S.current.pause(),S.current.removeEventListener("ended",(()=>f(!1)))),k.current&&clearInterval(k.current),g&&g.stop()}}),[]),r.useEffect((()=>{b.current&&b.current.scrollIntoView({behavior:"smooth"})}),[n]),r.useEffect((()=>{n.length>10&&i((e=>e.slice(-10)))}),[n]),r.useEffect((()=>{l?navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{const t=new Va({apiKey:void 0,voiceId:void 0,webhookUrl:"undefined/api/v1/voice/vapi-webhook/"});t.on("assistant-response",(async e=>{if("final-transcript"===e.type){const t=e.message;C(t)}else e.type})),t.on("error",(e=>{v(`Vapi Error: ${e.message}`)})),t.on("ready",(()=>{})),t.on("started",(()=>{})),t.on("ended",(()=>{T.current&&(T.current=null),h(!1)})),_(t),e.getTracks().forEach((e=>e.stop()))})).catch((e=>{v("Microphone access is required for voice mode. Please enable it in your browser settings."),u(!1)})):g&&(g.stop(),_(null))}),[l]);const C=async e=>{o(!0),t(e);const r=T.current;if(!r)return v("Session ID is missing. Please try again."),void o(!1);const s=n.length;i((t=>[...t,{query:e,response:"Thinking...",error:null,timestamp:(new Date).toISOString(),isProcessing:!0}]));try{const t=await(async(e,t,n)=>{try{const r=await fetch(`${E}voice/process-input/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,window_id:t,session_id:n||crypto.randomUUID(),enable_webhook:!0})});if(!r.ok){const e=await r.text();throw new Error(`API Error: ${r.status} - ${e}`)}return await r.json()}catch(r){throw r}})(e,a,r);if(!t||t.error)throw new Error((null==t?void 0:t.error)||"Processing failed");t.audio_url&&S.current&&(S.current.src=t.audio_url,S.current.play(),f(!0)),k.current&&clearInterval(k.current),k.current=setInterval((async()=>{try{const e=await(async e=>{try{const t=await fetch(`${E}voice/check-status/${e}`);if(!t.ok){const e=await t.text();throw new Error(`API Error: ${t.status} - ${e}`)}return await t.json()}catch(t){throw t}})(r);"completed"===e.status&&e.audio_url&&(k.current&&(clearInterval(k.current),k.current=null),i((t=>t.map(((t,n)=>n===s?{...t,response:e.response||t.response,audioUrl:e.audio_url,isProcessing:!1}:t)))),e.audio_url&&S.current&&!p&&(S.current.src=e.audio_url,S.current.play(),f(!0)))}catch(e){}}),2e3),setTimeout((()=>{k.current&&(clearInterval(k.current),k.current=null,i((e=>e.map(((e,t)=>t===s&&e.isProcessing?{...e,response:"Sorry, it's taking longer than expected. Please try again.",isProcessing:!1}:e)))))}),3e4)}catch(c){v(`Error: ${c instanceof Error?c.message:"Unknown error"}`),i((e=>e.length>0&&"Thinking..."===e[e.length-1].response?e.slice(0,-1):e))}finally{o(!1)}};return y.jsxs("div",{className:"flex flex-col items-center justify-start w-full h-full p-8 space-y-6",children:[y.jsx("div",{className:"w-full max-w-md flex justify-end mb-2",children:y.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[y.jsx("span",{className:"mr-3 text-sm font-medium text-gray-400",children:"Voice Mode"}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l,onChange:()=>u(!l)}),y.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})}),y.jsxs("div",{className:"w-full max-w-md flex-grow overflow-y-auto mb-4 max-h-[60vh] border border-gray-700 rounded-lg p-4 bg-gray-900",children:[0===n.length?y.jsx("p",{className:"text-gray-500 text-center italic",children:"No interactions yet.  Start by sending a query below."}):n.map(((e,t)=>y.jsxs("div",{className:"mb-6 last:mb-2",children:[y.jsxs("div",{className:"mb-2",children:[y.jsx("div",{className:"font-bold text-blue-400 mb-1",children:"You:"}),y.jsx("div",{className:"pl-3 border-l-2 border-blue-400 text-gray-300",children:e.query})]}),e.error?y.jsxs("div",{className:"mt-2",children:[y.jsx("div",{className:"font-bold text-red-500 mb-1",children:"Error:"}),y.jsxs("div",{className:"p-3 bg-red-900 border border-red-500 rounded-lg",children:[y.jsx("p",{className:"font-bold",children:e.error.code}),y.jsx("p",{children:e.error.message}),e.error.details&&y.jsx("pre",{className:"mt-2 text-sm overflow-x-auto",children:JSON.stringify(e.error.details,null,2)})]})]}):y.jsxs("div",{className:"mt-2",children:[y.jsxs("div",{className:"font-bold text-green-400 mb-1 flex items-center justify-between",children:[y.jsx("span",{children:"Wintermute:"}),l&&e.audioUrl&&y.jsxs("button",{onClick:()=>{return t=e.audioUrl,void(S.current&&t&&(p&&S.current.pause(),S.current.src=t,S.current.play(),f(!0)));var t},className:"text-sm bg-blue-600 hover:bg-blue-700 text-white py-1 px-2 rounded flex items-center",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]})]}),y.jsxs("div",{className:"pl-3 border-l-2 border-green-400 text-gray-300 whitespace-pre-wrap "+(e.isProcessing?"italic text-gray-500":""),children:[e.response,e.isProcessing&&y.jsxs("span",{className:"inline-flex ml-2",children:[y.jsx("span",{className:"animate-bounce mx-px",children:"."}),y.jsx("span",{className:"animate-bounce animation-delay-200 mx-px",children:"."}),y.jsx("span",{className:"animate-bounce animation-delay-400 mx-px",children:"."})]})]})]})]},t))),y.jsx("div",{ref:b})]}),m&&y.jsx("div",{className:"w-full max-w-md p-3 bg-red-900 border border-red-500 rounded text-white mb-4",children:m}),y.jsxs("div",{className:"w-full max-w-md flex flex-col space-y-4",children:[y.jsx("textarea",{value:e,onChange:e=>t(e.target.value),className:"w-full p-4 border rounded-lg text-gray-300 bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your query here...",rows:4,disabled:d||s}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("button",{onClick:async()=>{if(!e.trim())return;o(!0);const n=e;t("");try{const e=await(async(e,t)=>{try{const n={prompt:e,top_k:5,window_id:t,request_metadata:{operation_type:"QUERY",timestamp:(new Date).toISOString(),window_id:t,trace_id:crypto.randomUUID()}},r=await fetch(`${E}query`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)});if(!r.ok){let e,t=`HTTP Error ${r.status}: ${r.statusText}`;try{e=await r.json(),e.message&&(t=e.message)}catch(an){const i=await r.text();e={raw:i},i&&(t+=` - ${i}`)}return w(`API_ERROR_${r.status}`,t,e)}return await r.json()}catch(n){return w("CLIENT_ERROR",n instanceof Error?n.message:"Unknown client error",{error:n})}})(n,a),t={query:n,response:e.error?null:e.response||"No response from the AI.",error:e.error||null,timestamp:(new Date).toISOString()};if(l&&!e.error&&e.response)try{const n=await(async e=>{try{const t=new FormData;t.append("text",e);const n=await fetch(`${E}voice/text-to-speech/`,{method:"POST",body:t});if(!n.ok){const t=await n.text();return{audio_url:"",response:e,error:`API Error: ${n.status} - ${t}`}}const r=await n.json();return{audio_url:r.audio_url||"",response:e,error:r.error}}catch(t){return{audio_url:"",response:e,error:t instanceof Error?t.message:"Unknown error"}}})(e.response);n.audio_url&&(t.audioUrl=n.audio_url,S.current&&(S.current.src=n.audio_url,S.current.play(),f(!0)))}catch(r){}i((e=>[...e,t]))}catch(r){const e={query:n,response:null,error:{code:"UNKNOWN_ERROR",message:r instanceof Error?r.message:"An unknown error occurred",timestamp:(new Date).toISOString()},timestamp:(new Date).toISOString()};i((t=>[...t,e]))}finally{o(!1)}},disabled:s||d||!e.trim(),className:"flex-1 px-6 py-2 bg-blue-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Processing...":"Send Query"}),l&&y.jsx("button",{onClick:d?()=>{g&&(g.stop(),h(!1),o(!0))}:async()=>{if(v(null),g){h(!0),T.current=crypto.randomUUID();try{await g.start()}catch(e){v("Could not start voice call. Please check your microphone and Vapi configuration."),h(!1)}}else v("Voice mode is not properly initialized.")},disabled:s&&!d,className:`w-12 h-12 rounded-full flex items-center justify-center transition duration-300 ${d?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} ${s&&!d?"opacity-50 cursor-not-allowed":""}`,children:s&&!d?y.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?y.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("rect",{x:"6",y:"6",width:"12",height:"12",strokeWidth:"2"})}):y.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})]}),l&&y.jsx("div",{className:"text-center text-gray-400 text-sm",children:d?"Click the button when you're done speaking":s?"Processing your question...":"Click the microphone button to speak your question"})]})]})},Ga=()=>y.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-screen",children:[y.jsx("h1",{className:"text-4xl font-bold mb-2",children:"wintermute ai system"})," ",y.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"By jay"})," ",y.jsx("div",{className:"w-64 h-4 bg-gray-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500 ease-in-out",style:{width:"100%"}})})]}),$a=()=>{const[e,t]=r.useState(!0),[n]=r.useState(`wintermute-${Date.now()}`);return r.useEffect((()=>{const e=setTimeout((()=>{t(!1)}),2e3);return()=>{clearTimeout(e)}}),[n]),y.jsx("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:e?y.jsx(Ga,{}):y.jsxs(y.Fragment,{children:[y.jsx("header",{className:"bg-gray-800 p-4 shadow-md",children:y.jsx("div",{className:"container mx-auto"})}),y.jsx("main",{className:"container mx-auto py-6 flex-1 flex flex-col",children:y.jsx(Ya,{},`integrated-${n}`)}),y.jsx("footer",{className:"bg-gray-800 p-4",children:y.jsx("div",{className:"container mx-auto text-center text-gray-400 text-sm"})})]})})},Ja=document.getElementById("root");if(!Ja)throw new Error("Root element not found");g(Ja).render(y.jsx(a.StrictMode,{children:y.jsx($a,{})}))}},function(){return l||(0,c[t(c)[0]])((l={exports:{}}).exports,l),l.exports});export default u();
